<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Dr. Naomi Zimmerman" />

<meta name="date" content="2023-10-02" />

<title>AAAR 2023 Data Wrangling Tutorial</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">2023 Data Wrangling Tutorial</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">AAAR 2023 Data Wrangling Tutorial</h1>
<h4 class="author">Dr. Naomi Zimmerman</h4>
<h4 class="date">2023-10-02</h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Managing your experimental data is increasingly difficult because of
the sheer volume of data that is being collected, the high time
resolution of the data, the number of data users, and publishing
requirements on making data and codes open and accessible. Taking some
time to learn from core data management and data wrangling skills is
important!</p>
<p>In this tutorial, we’ll look at the data management and analysis
pipeline from data import / upload through to data visualization. We’ll
compare a couple of different approaches considering the needs I just
outlined. The first data set I am providing is a pre-cleaned data set
for simplicity and to show the pipeline from start to finish. If we have
time, we’ll look at a more complicated set of data that requires more
pre-processing before we can look at it.</p>
<p>There are many coding languages you can use to work with your data.
In this tutorial, I am going to use Structured Query Language (SQL) and
R. To manage SQL data, I will show an example with <a
href="https://www.mysql.com/products/community/">MySQL</a>. This is just
one database management system, and many of the same principles will
apply if you’re using other popular SQL database management systems like
<a href="https://www.sqlite.org/download.html">SQLite</a> or <a
href="https://www.postgresql.org/download/">PostgreSQL</a>. You just
need to change the R package you are using to interface with the SQL
database management system you are using.</p>
<p>I’ll also briefly demonstrate importing your data directly into <a
href="https://cran.r-project.org/">R</a> and some common pitfalls / why
the SQL approach can be preferable.</p>
<p>Once our data is in <a href="https://cran.r-project.org/">R</a> using
<a href="https://posit.co/download/rstudio-desktop/">RStudio</a>, a
popular integrated development environment (IDE) for R, we’ll do some
quick visualizations, introducing you to a popular collection of R
coding packages called the <a
href="https://www.tidyverse.org/">‘tidyverse’</a>. This shares many
principles with the <a href="https://pandas.pydata.org/">‘pandas’</a>
software library in <a
href="https://www.python.org/downloads/">Python</a>. So while we will
work in R/RStudio today, again, many of the ideas or processes can be
replicated in Python (for example using the <a
href="https://www.jetbrains.com/pycharm/download/">PyCharm IDE</a>).
It’s just a matter of personal preference :)</p>
<p>To manage our R codes and take notes / share interim plots, we’ll be
using a markdown file. I’m typing this tutorial right now in an R
Markdown file. Very meta. Another popular piece of software for markdown
files with embedded R or Python coding is <a
href="https://jupyter.org/">Jupyter Notebooks</a>. We won’t run any
Jupyter notebooks, but I will show you briefly what they’re all
about.</p>
<p>As we work through our data, we all know that analysis can take time.
Or perhaps we want to run a code that might break everything (happens to
the best of us!) and we want to make sure we can restore our previous
code. Version control is your friend here and it’s so easy to do with <a
href="https://git-scm.com/downloads">Git</a>, which is a distributed
version control system that tracks changes in any set of computer files.
We’ll use the <a href="https://github.com/join">Github</a> platform as
our convenient cloud-based system to execute our Git version control. A
nice feature of Github is that we can also easily convert our Markdown
files into webpages (which is what you’re reading right now!). So cool,
right?</p>
<p>Lastly, if you have a lot of data being collected routinely, it can
be cool to show your data. We’ll do a simple example in <a
href="https://grafana.com/grafana/download">Grafana</a>, which is an
open source analytics and interactive visualization web application.</p>
<p>What we’ll cover today is a lot for a 1 hour 45 minute session - and
that’s okay! The goal is that you come out of this tutorial with some
ideas, new terminology and an interest in learning more. If you take the
time to learn these principles and approaches early on in your program,
you’ll have an easier time down the road when you’re trying to address
Reviewer 2 comments almost a year after a paper was originally
developed, because you left yourself an awesome paper trail. Future you
is already thanking you! Now without further ado, let’s get started.</p>
<div id="getting-yourself-set-up" class="section level2">
<h2>Getting yourself set-up</h2>
<p>If you want to follow along in real-time, you’ll need the following
tools installed on your machine. Note that I tested this tutorial in the
Windows operating system. I can’t make any guarantees it will work 100%
smoothly in a macOS or Linux operating system, but there shouldn’t be
too many pitfalls with this.</p>
<p>Tools needed:</p>
<ul>
<li>MySQL <a href="https://www.youtube.com/watch?v=qBBXBZXKi0w">(Click
here for YouTube tutorial for installing MySQL on Windows 11)</a></li>
<li>R and RStudio <a
href="https://www.youtube.com/watch?v=YrEe2TLr3MI">(Click here for
YouTube tutorial for installing R and RStudio)</a></li>
<li>Git and a Github account <a
href="https://github.com/git-guides/install-git">(Click here for a
Github Guide on Installing Git)</a></li>
<li>Connect Git to RStudio <a
href="https://www.youtube.com/watch?v=bUoN85QvC10">(Click here for a
YouTube tutorial on connecting Git and Github to an RStudio
Project)</a></li>
</ul>
<p>Other notes:</p>
<ul>
<li>This tutorial will require a bunch of R packages to be installed -
but don’t worry, I have parts of the code blocks below that will install
any R packages you might need that you don’t already have :)</li>
<li>All the data, codes and markdown files are available in the Github
repository <a
href="https://github.com/nzimmerman-ubc/AAAR2023-tutorial">(Click here
to access)</a></li>
<li>If you just want the R Markdown file, you can download it from the
upper right corner of the page.</li>
</ul>
</div>
</div>
<div id="part-0-version-control" class="section level1">
<h1>Part 0: Version Control</h1>
<p>In developing this tutorial, I used version control using Git and
Github. If you’re in academia, Github is great because you can get
access to many paid features for free (making pages from private
repositories, creating organizations, etc.). You can interact with Git
in RStudio very easily after it’s installed (see links from the
Introduction). Once you’ve successfully installed Git and made it
accessible in RStudio, you’ll see a little “Git” tab in the top right
panel. We can use this panel to quickly Commit changes to our
repository, view file additions or deletions, etc.</p>
<p>Those who are familiar with Git may prefer to use the command line -
that’s outside of the scope of our tutorial today, but you can access
the terminal from RStudio in the “Terminal” tab of the bottom left
panel.</p>
<p>I will now quickly demonstrate making a change, committing that
change, and pushing my change to Github.</p>
<div id="forking-the-directory" class="section level2">
<h2>Forking the directory</h2>
<p>If you want to follow along in real-time with this tutorial, navigate
to this tutorial’s repository <a
href="https://github.com/nzimmerman-ubc/AAAR2023-tutorial">(Click here
to access)</a> and create a fork (which will create a local copy in your
own repository).</p>
</div>
</div>
<div id="part-1-sql-set-up-and-logistics" class="section level1">
<h1>Part 1: SQL Set-up and Logistics</h1>
<p>Before we can start playing with data, we’re going to make sure we
have set up and configured MySQL on our machine. We’ll do this part
live, so follow along. We can interact with MySQL in a few ways:</p>
<ul>
<li>MySQL Workbench: A Graphical User Interface for your SQL data</li>
<li>The command line</li>
</ul>
<p>The nice thing about the workbench is that it can help you learn how
to write and parse SQL queries, since it will translate your request
into the query. So we’ll mostly be using the Workbench to check that our
work is being stored correctly, but I will show some quick examples in
the command line too later on in the tutorial.</p>
<p>Once we have set up MySQL on our machine, making note of the MySQL
user (and their credentials to write new tables etc.), we can start
working in R to import our data, write it to SQL, and be off to the
races.</p>
<p><em>A note on how I’m using SQL here:</em> One of the core features
of an SQL database is that you can link different scheme (think tables)
together with keys. Keys can be used to create a relationship among
different database tables or views. This isn’t a tutorial on SQL, so
we’re keeping it simple today. But if SQL is something you want to
learn, this is a pretty fundamental concept to keep in mind.</p>
<div id="diving-into-r" class="section level2">
<h2>Diving into R</h2>
<p>What you’re looking at right now is an HTML version of an RMarkdown
file that I prepared for this tutorial. A markdown document allows me to
combine text, code blocks, and outputs of those codes in one place. If
you download the ‘Rmd’ file from the website, you can see what the
Markdown document looks like in its raw form. When you’re done editing,
you can see the formatted html version by “Knitting”.</p>
<div id="an-aside-jupyter-notebooks" class="section level3">
<h3>(<em>An Aside</em>) Jupyter Notebooks</h3>
<p>A very popular alternative to R Markdown documents is Jupyter
Notebooks. If Python is your thing, you’ll probably prefer them. You can
also add in R to Jupyter notebooks and even toggle between R code blocks
and Python code blocks in one place. Let’s take a quick peek at the
Jupyter notebooks ecosystem so you can make a mental note to learn more
another day.</p>
</div>
<div id="r-set-up-libraries-and-packages" class="section level3">
<h3>R Set-up: Libraries and Packages</h3>
<p>In this first code block, we’re going to (1) check for the necessary
packages to execute the codes in this Markdown document, (2) install
those packages if you haven’t already installed them, and (3) load the
packages if installed.</p>
<p>I like the ‘pacman’ package to streamline this process, since you can
just give it a list of packages within the ‘p_load’ command that will
elegantly install any missing packages and then load them.</p>
<pre class="r"><code># Check for pacman and load
if (!require(&quot;pacman&quot;)) install.packages(&quot;pacman&quot;); library(pacman)</code></pre>
<pre><code>## Loading required package: pacman</code></pre>
<pre class="r"><code># Install / load required packages
p_load(DBI,RODBC,odbc,dbplyr,RMySQL,tidyverse,keyring,con2aqi,lubridate, stringr)</code></pre>
</div>
<div id="r-set-up-sql-connection" class="section level3">
<h3>R Set-up: SQL Connection</h3>
<p>The packages we have loaded (specifically: DBI, RODBC, ODBC and
dbplyr) will let us connect to and manipulate an SQL database. Let’s
first check to make sure we have the appropriate drivers installed to
run these packages successfully, and then connect to our SQL
database.</p>
<p>(note, if you don’t have an empty database to work with, we can
create one in either the MySQL workbench or in the command line)</p>
<blockquote>
<p>mysql -u root -p</p>
</blockquote>
<blockquote>
<p>CREATE DATABASE livedemo;</p>
</blockquote>
<p>You’ll notice in the code block below that I haven’t actually shown
you my MySQL password - this is good coding practice. It’s not a good
idea to be widely sharing passwords, API keys etc. The best approach
here is to store your password as an environment variable. I like the
‘keyring’ package to do this for me. I have previously stored my
password and so I can just use the key_get function to load it.
Hooray!</p>
<pre class="r"><code># First check that the MySQL driver is listed here before proceeding.
sort(unique(odbcListDrivers()[[1]]))</code></pre>
<pre><code>## [1] &quot;Microsoft Access Driver (*.mdb, *.accdb)&quot;              
## [2] &quot;Microsoft Access Text Driver (*.txt, *.csv)&quot;           
## [3] &quot;Microsoft Excel Driver (*.xls, *.xlsx, *.xlsm, *.xlsb)&quot;
## [4] &quot;MySQL ODBC 8.1 ANSI Driver&quot;                            
## [5] &quot;MySQL ODBC 8.1 Unicode Driver&quot;                         
## [6] &quot;SQL Server&quot;</code></pre>
<pre class="r"><code># Now connect to our SQL database using the &#39;dbConnect&#39; function:

sql_conn &lt;- dbConnect(RMySQL::MySQL(),
                  dbname = &quot;aaar2023tutorial&quot;,
                  Server = &quot;localhost&quot;,
                  port = 3306,
                  user = &quot;root&quot;,
                  password = key_get(&quot;MYSQL_PASSWORD&quot;)
                  )</code></pre>
</div>
</div>
</div>
<div id="part-2-building-our-sql-database-and-querying-it-example-1"
class="section level1">
<h1>Part 2: Building our SQL Database and Querying it; Example 1</h1>
<p>In our first example, we have some pre-cleaned data from a deployment
last year in Vancouver, BC. In this deployment, we had 11
multi-pollutant low-cost sensors, and also collected data from 4
regulatory monitoring stations to compare our focus neighborhood to the
surrounding region. Let’s load the metadata from this example and show
it as a table.</p>
<pre class="r"><code>metadata &lt;- read_csv(&quot;data/example 1/metadata.csv&quot;, show_col_types = FALSE)
knitr::kable(metadata)</code></pre>
<table>
<colgroup>
<col width="38%" />
<col width="26%" />
<col width="8%" />
<col width="12%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">ID</th>
<th align="right">latitude</th>
<th align="right">longitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1001</td>
<td align="left">R1001</td>
<td align="right">49.2840</td>
<td align="right">-123.0970</td>
</tr>
<tr class="even">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1002</td>
<td align="left">R1002</td>
<td align="right">49.2810</td>
<td align="right">-123.1010</td>
</tr>
<tr class="odd">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1004</td>
<td align="left">R1004</td>
<td align="right">49.2790</td>
<td align="right">-123.0850</td>
</tr>
<tr class="even">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1005</td>
<td align="left">R1005</td>
<td align="right">49.2780</td>
<td align="right">-123.0910</td>
</tr>
<tr class="odd">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1008</td>
<td align="left">R1008</td>
<td align="right">49.2770</td>
<td align="right">-123.0860</td>
</tr>
<tr class="even">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1009</td>
<td align="left">R1009</td>
<td align="right">49.2810</td>
<td align="right">-123.0740</td>
</tr>
<tr class="odd">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1011</td>
<td align="left">R1011</td>
<td align="right">49.2790</td>
<td align="right">-123.0920</td>
</tr>
<tr class="even">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1012</td>
<td align="left">R1012</td>
<td align="right">49.2820</td>
<td align="right">-123.0990</td>
</tr>
<tr class="odd">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1039</td>
<td align="left">R1039</td>
<td align="right">49.2800</td>
<td align="right">-123.0930</td>
</tr>
<tr class="even">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1040</td>
<td align="left">R1040</td>
<td align="right">49.2800</td>
<td align="right">-123.0820</td>
</tr>
<tr class="odd">
<td align="left">Low-cost sensor</td>
<td align="left">RAMP 1041</td>
<td align="left">R1041</td>
<td align="right">49.2820</td>
<td align="right">-123.0880</td>
</tr>
<tr class="even">
<td align="left">Regulatory Metro Vancouver</td>
<td align="left">Burnaby South</td>
<td align="left">BS</td>
<td align="right">49.2152</td>
<td align="right">-122.9857</td>
</tr>
<tr class="odd">
<td align="left">Regulatory Metro Vancouver</td>
<td align="left">Burnaby Kensington</td>
<td align="left">BK</td>
<td align="right">49.2792</td>
<td align="right">-122.9707</td>
</tr>
<tr class="even">
<td align="left">Regulatory Metro Vancouver</td>
<td align="left">Richmond South</td>
<td align="left">RS</td>
<td align="right">49.1414</td>
<td align="right">-123.1082</td>
</tr>
<tr class="odd">
<td align="left">Regulatory Metro Vancouver</td>
<td align="left">Mahon Park</td>
<td align="left">MP</td>
<td align="right">49.3240</td>
<td align="right">-123.0835</td>
</tr>
</tbody>
</table>
<p>For each of these locations, I have provided about 4 months of daily
average concentrations of NO<sub>2</sub>, PM<sub>2.5</sub>, and
O<sub>3</sub>. I want to first create some SQL tables to store this
data, load the data into those tables, and then use the SQL query format
to start making some analyses and figures.</p>
<div id="load-the-data-and-create-the-tables" class="section level2">
<h2>Load the data and create the tables</h2>
<p>Note I have put in a flag here of 0 or 1 if this is your first time
executing the script. If you’re running it for the first time, set
initial_run to “1”, otherwise set it to “0” to skip to the next steps.
SQL will throw an error if you try and create a new table that already
exists.</p>
<p>We also need to set some permissions on the R and MySQL side of
things to make sure we can write from these local files. For these
permissions in R, this is embedded in the code. For the MySQL side, you
will need to edit the “my.ini” configuration file using Notepad or other
text editor and add the statement “local_infile=1” under the [client],
[mysql], and [mysqld] sections of the file and save it. I’ll show you
this now.</p>
<pre class="r"><code>initial_run=0

if(initial_run==1){
## This should only be run once.

# Load our data

NO2_daily &lt;- read_csv(&quot;data/example 1/NO2_daily.csv&quot;, col_types = cols(date = col_date(format = &quot;%m/%d/%Y&quot;)), show_col_types = FALSE)
O3_daily &lt;- read_csv(&quot;data/example 1/O3_daily.csv&quot;, col_types = cols(date = col_date(format = &quot;%m/%d/%Y&quot;)), show_col_types = FALSE)
PM_daily &lt;- read_csv(&quot;data/example 1/PM_daily.csv&quot;, col_types = cols(date = col_date(format = &quot;%m/%d/%Y&quot;)), show_col_types = FALSE)

# So that we can permit writing to SQL from R!
dbSendQuery(sql_conn, &quot;SET GLOBAL local_infile = true;&quot;)

# create tables in your SQL database
dbCreateTable(sql_conn,name=&quot;no2_daily&quot;, fields=NO2_daily)
dbCreateTable(sql_conn,name=&quot;o3_daily&quot;, fields=O3_daily)
dbCreateTable(sql_conn,name=&quot;pm_daily&quot;, fields=PM_daily)

# write our data to the SQL database
dbWriteTable(sql_conn,&quot;no2_daily&quot;,NO2_daily,append=TRUE, row.names=FALSE)
dbWriteTable(sql_conn,&quot;o3_daily&quot;,O3_daily,append=TRUE, row.names=FALSE)
dbWriteTable(sql_conn,&quot;pm_daily&quot;,PM_daily,append=TRUE, row.names=FALSE)

# RMySQL has some quirks where it really fights pushing the data in a correct datetime format, so we manually send a query to SQL to make sure it&#39;s formatted correctly!
dbSendQuery(sql_conn,&quot;ALTER TABLE no2_daily MODIFY date datetime;&quot;)
dbSendQuery(sql_conn,&quot;ALTER TABLE o3_daily MODIFY date datetime;&quot;)
dbSendQuery(sql_conn,&quot;ALTER TABLE pm_daily MODIFY date datetime;&quot;)
}</code></pre>
</div>
<div id="interacting-with-the-data" class="section level2">
<h2>Interacting with the data</h2>
<p>Imagine now that you are perhaps a secondary user of the data - maybe
this is from a big field campaign and different people will be slicing
and dicing the data in different ways. This is where having your data in
an SQL database can be super helpful.</p>
<p>You can have a select group of folks maintaining the SQL database (or
even better log directly into an SQL server, but that’s a story for
another day), and then create a new user who only has permission to
SELECT data from the SQL database but not actually modify it.</p>
<p>That keeps your original data safe and sound! Also it’s
computationally more efficient to just pull in the data you need.</p>
<p>So let’s look at how we can do this in R. To do this, we’re going to
take advantage of the ‘dbplyr’ package, which lets you use typically
‘tidyverse’ style commands to interact with databases. Once you’ve
finished your tweaks, the `dbplyr’ package will just make 1 singular
call to the database, and it also has the functionality to show you your
query so you can learn the SQL equivalent at the same time.
Win-win!!</p>
<p>I will show you three different ways of playing with some of this
data:</p>
<ol style="list-style-type: decimal">
<li><p>Pulling all the pollutant data into one data.table in R for a
specified week at the Mahon Park site and calculating a pseudo-AQI (my
time averaging is wrong for true AQI, but this is a fictional example).
There is a little package called con2aqi that converts concentrations to
AQI that we will use here.</p></li>
<li><p>Box plots across all our sites for each pollutant</p></li>
<li><p>A time series of all our sites for NO2.</p></li>
</ol>
<p>These are just some simple examples, obviously everyone’s data
questions are unique, this is just to provide some inspiration.</p>
<pre class="r"><code># Data processing 1: Let&#39;s say we are interested in calculating the AQI for the week of May 15 - 21, 2022 at the Mahon Park site (MP)

no2_db = tbl(sql_conn,&quot;no2_daily&quot;) %&gt;% select(date,MP) %&gt;% filter(between(date, as.Date(&#39;2022-05-15&#39;), as.Date(&#39;2022-05-21&#39;))) %&gt;% show_query() %&gt;% collect() %&gt;% rename(NO2_MP = MP)</code></pre>
<pre><code>## &lt;SQL&gt;
## SELECT `date`, `MP`
## FROM `no2_daily`
## WHERE (`date` BETWEEN CAST(&#39;2022-05-15&#39; AS DATE) AND CAST(&#39;2022-05-21&#39; AS DATE))</code></pre>
<pre class="r"><code>o3_db = tbl(sql_conn,&quot;o3_daily&quot;) %&gt;% select(date,MP) %&gt;% filter(between(date, as.Date(&#39;2022-05-15&#39;), as.Date(&#39;2022-05-21&#39;))) %&gt;% show_query() %&gt;% collect() %&gt;% rename(O3_MP = MP)</code></pre>
<pre><code>## &lt;SQL&gt;
## SELECT `date`, `MP`
## FROM `o3_daily`
## WHERE (`date` BETWEEN CAST(&#39;2022-05-15&#39; AS DATE) AND CAST(&#39;2022-05-21&#39; AS DATE))</code></pre>
<pre class="r"><code>pm_db = tbl(sql_conn,&quot;pm_daily&quot;) %&gt;% select(date,MP) %&gt;% filter(between(date, as.Date(&#39;2022-05-15&#39;), as.Date(&#39;2022-05-21&#39;))) %&gt;% show_query() %&gt;% collect() %&gt;% rename(PM_MP = MP)</code></pre>
<pre><code>## &lt;SQL&gt;
## SELECT `date`, `MP`
## FROM `pm_daily`
## WHERE (`date` BETWEEN CAST(&#39;2022-05-15&#39; AS DATE) AND CAST(&#39;2022-05-21&#39; AS DATE))</code></pre>
<pre class="r"><code>#let&#39;s put it together into one dataframe for our local analysis
aqi &lt;- left_join(no2_db, o3_db, by=&#39;date&#39;) %&gt;% left_join(., pm_db, by=&#39;date&#39;) %&gt;% rowwise() %&gt;%
  mutate(aqi = max(con2aqi(&quot;pm25&quot;,PM_MP),con2aqi(&quot;o3&quot;,O3_MP/1000,&quot;8h&quot;),con2aqi(&quot;no2&quot;,NO2_MP)))

knitr::kable(aqi)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">date</th>
<th align="right">NO2_MP</th>
<th align="right">O3_MP</th>
<th align="right">PM_MP</th>
<th align="right">aqi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2022-05-15 00:00:00</td>
<td align="right">17.36167</td>
<td align="right">23.96840</td>
<td align="right">3.784572</td>
<td align="right">23</td>
</tr>
<tr class="even">
<td align="left">2022-05-16 00:00:00</td>
<td align="right">18.65333</td>
<td align="right">39.14375</td>
<td align="right">4.175584</td>
<td align="right">37</td>
</tr>
<tr class="odd">
<td align="left">2022-05-17 00:00:00</td>
<td align="right">7.83000</td>
<td align="right">35.28208</td>
<td align="right">4.057679</td>
<td align="right">33</td>
</tr>
<tr class="even">
<td align="left">2022-05-18 00:00:00</td>
<td align="right">8.46000</td>
<td align="right">36.90521</td>
<td align="right">2.723355</td>
<td align="right">35</td>
</tr>
<tr class="odd">
<td align="left">2022-05-19 00:00:00</td>
<td align="right">16.86000</td>
<td align="right">31.18792</td>
<td align="right">2.832343</td>
<td align="right">29</td>
</tr>
<tr class="even">
<td align="left">2022-05-20 00:00:00</td>
<td align="right">15.44333</td>
<td align="right">27.66354</td>
<td align="right">4.070064</td>
<td align="right">26</td>
</tr>
<tr class="odd">
<td align="left">2022-05-21 00:00:00</td>
<td align="right">23.57333</td>
<td align="right">27.47411</td>
<td align="right">5.322663</td>
<td align="right">26</td>
</tr>
</tbody>
</table>
<pre class="r"><code>##################

# Data processing 2: Make box plots of the NO2, O3 and PM2.5 daily average concentrations across all the sites.

no2_tidy = tbl(sql_conn,&quot;no2_daily&quot;) %&gt;% select(-date) %&gt;% collect() %&gt;% pivot_longer(everything(),names_to = &quot;site&quot;, values_to = &quot;concentration&quot;)

# Create a custom order for the &#39;site&#39; variable
site_order &lt;- c(&quot;BS&quot;, &quot;BK&quot;, &quot;MP&quot;,&quot;RS&quot;,&quot;R1001&quot;,&quot;R1002&quot;,&quot;R1004&quot;,&quot;R1005&quot;,&quot;R1008&quot;,&quot;R1009&quot;,&quot;R1011&quot;,&quot;R1012&quot;,&quot;R1039&quot;,&quot;R1040&quot;,&quot;R1041&quot;)

# Generate the boxplot in ggplot2
no2_plot &lt;- ggplot(no2_tidy, aes(x = factor(site, levels = site_order), y = concentration, fill=site)) +
  geom_boxplot() +
  labs(title = &quot;NO2 Concentrations by Site&quot;,
       x = &quot;Site&quot;,
       y = &quot;Concentration (ppb)&quot;) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1), legend.position=&quot;none&quot;) +
  scale_fill_discrete() +
  coord_cartesian(ylim = c(0,60))

no2_plot</code></pre>
<p><img src="index_files/figure-html/ex1-query-1.png" width="672" /></p>
<pre class="r"><code># Repeat for O3
o3_tidy = tbl(sql_conn,&quot;o3_daily&quot;) %&gt;% select(-date) %&gt;% collect() %&gt;% pivot_longer(everything(),names_to = &quot;site&quot;, values_to = &quot;concentration&quot;)

o3_plot &lt;- ggplot(o3_tidy, aes(x = factor(site, levels = site_order), y = concentration, fill=site)) +
  geom_boxplot() +
  labs(title = &quot;O3 Concentrations by Site&quot;,
       x = &quot;Site&quot;,
       y = &quot;Concentration (ppb)&quot;) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1), legend.position=&quot;none&quot;) +
  scale_fill_discrete() +
  coord_cartesian(ylim = c(0,60))
o3_plot</code></pre>
<p><img src="index_files/figure-html/ex1-query-2.png" width="672" /></p>
<pre class="r"><code># Repeat for PM2.5
pm_tidy = tbl(sql_conn,&quot;pm_daily&quot;) %&gt;% select(-date) %&gt;% collect() %&gt;% pivot_longer(everything(),names_to = &quot;site&quot;, values_to = &quot;concentration&quot;)

pm_plot &lt;- ggplot(pm_tidy, aes(x = factor(site, levels = site_order), y = concentration, fill=site)) +
  geom_boxplot() +
  labs(title = &quot;PM2.5 Concentrations by Site&quot;,
       x = &quot;Site&quot;,
       y = &quot;Concentration (ug/m3)&quot;) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1), legend.position=&quot;none&quot;) +
  scale_fill_discrete() +
  coord_cartesian(ylim = c(0,20))
pm_plot</code></pre>
<p><img src="index_files/figure-html/ex1-query-3.png" width="672" /></p>
<pre class="r"><code># Date Processing 3: Now let&#39;s make a time series for the month of July 2022 for NO2 at all of our sites.

no2_july = tbl(sql_conn,&quot;no2_daily&quot;) %&gt;% filter(month(date)==7) %&gt;% show_query() %&gt;% collect() %&gt;% pivot_longer(cols=c(2:16),names_to = &quot;site&quot;, values_to = &quot;concentration&quot;)</code></pre>
<pre><code>## &lt;SQL&gt;
## SELECT *
## FROM `no2_daily`
## WHERE (EXTRACT(month FROM `date`) = 7.0)</code></pre>
<pre class="r"><code>no2_july$Grouping &lt;- as.factor(no2_july$site)


ggplot(no2_july, aes(x=ymd_hms(date), y=concentration, color=Grouping)) + 
  geom_line(size=2, na.rm=TRUE) + 
  labs(title = &quot;Time Series of Data for July&quot;,
       x = &quot;Date&quot;,
       y = &quot;NO2 Concentration (ppb)&quot;) +  
  scale_color_manual(values = rainbow(15), breaks = site_order) +
  theme_minimal()</code></pre>
<p><img src="index_files/figure-html/ex1-query-4.png" width="672" /></p>
</div>
</div>
<div id="part-3-dashboards-and-plotting-in-grafana"
class="section level1">
<h1>Part 3: Dashboards and plotting in Grafana</h1>
<p>Some of the figures we just generated are fine, or might be useful
for a publication, but say we are routinely collecting and downloading
data and we want to track our data as it is coming in (maybe we are
routinely collecting data and want a quick / dynamic way to visualize).
We can leverage our same SQL databases into the open-source Grafana
dashboarding tool. Let’s check it out!</p>
<div class="float">
<img src="celebrate.png" alt="Having fun at the AAAAR tutorial" />
<div class="figcaption">Having fun at the AAAAR tutorial</div>
</div>
<div id="create-a-read-only-user-in-mysql-to-interface-with-grafana"
class="section level2">
<h2>Create a read-only user in MySQL to interface with Grafana</h2>
<p>There’s no reason Grafana needs to be able to write new data, it’s
just visualizing what we already collected, so let’s make a restricted
version.</p>
<blockquote>
<p>CREATE USER ‘grafana-demo’@‘localhost’ IDENTIFIED BY
‘aaartutorial’;</p>
</blockquote>
<blockquote>
<p>SELECT User from mysql.user;</p>
</blockquote>
<blockquote>
<p>GRANT SELECT ON database_name.table_name TO
‘username’@‘localhost’;</p>
</blockquote>
<blockquote>
<p>FLUSH PRIVILEGES;</p>
</blockquote>
<p>Now let’s hop on over to Grafana and see what we can do. In general
this will consist of:</p>
<ul>
<li>Connecting to our MySQL data source (just a one time thing)</li>
<li>Creating new panels for our dashboard either using SQL Query or with
their interactive code builder.</li>
</ul>
</div>
</div>
<div id="part-4-some-messier-data" class="section level1">
<h1>Part 4: Some messier data</h1>
<p>Now let’s imagine we have some data as it is outputted directly from
an instrument. Let’s go with a WCPC for example. In our example 2 data
folder, we have 5 separate csv files from 5 different days, and the data
doesn’t start cleanly. Let’s process this to concatenate the files and
extract the relevant stuff!</p>
<div id="load-the-data-and-choose-column-names-we-like"
class="section level2">
<h2>Load the data and choose column names we like</h2>
<pre class="r"><code># First get the names of all the files in our WCPC raw folder:
file_names &lt;- list.files(path = &quot;data/example 2/WCPC raw/&quot;, pattern = &quot;*.csv&quot;, full.names = TRUE)

# Use lapply to read and concatenate the data
data_list &lt;- lapply(file_names, function(file) {
  read.csv(file, skip = 16)
})

# Combine the list of data frames into one data frame using bind_rows
concatenated_cpc &lt;- bind_rows(data_list)

# Give the columns nicer names
new_names &lt;- c(&quot;datetime&quot;, &quot;elapsed&quot;, &quot;concentration&quot;, &quot;counts&quot;, &quot;error_code&quot;)
names(concatenated_cpc) &lt;- new_names

#Clean up any blank rows lingering around from the csv:
concatenated_cpc &lt;- concatenated_cpc %&gt;%
  filter(datetime != &quot;&quot; &amp; !is.na(datetime))

knitr::kable(head(concatenated_cpc))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">datetime</th>
<th align="right">elapsed</th>
<th align="right">concentration</th>
<th align="right">counts</th>
<th align="left">error_code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2023-09-13 0:00:00</td>
<td align="right">116245</td>
<td align="right">4043.41</td>
<td align="right">20570</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">2023-09-13 0:00:01</td>
<td align="right">116246</td>
<td align="right">4087.23</td>
<td align="right">20790</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">2023-09-13 0:00:02</td>
<td align="right">116247</td>
<td align="right">4137.68</td>
<td align="right">21043</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">2023-09-13 0:00:03</td>
<td align="right">116248</td>
<td align="right">3999.69</td>
<td align="right">20350</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">2023-09-13 0:00:04</td>
<td align="right">116249</td>
<td align="right">4133.54</td>
<td align="right">21022</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">2023-09-13 0:00:05</td>
<td align="right">116250</td>
<td align="right">4269.59</td>
<td align="right">21705</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div id="create-our-sql-table-and-push-data" class="section level2">
<h2>Create our SQL Table and Push Data</h2>
<p>Now that we are generally happy with the format of the data, let’s
ship it out to our SQL database and then get it into Grafana. Recall
this will involve a few steps:</p>
<ol style="list-style-type: decimal">
<li>If it doesn’t already exist, make an empty table in your SQL
database.</li>
<li>Write the data to our new empty table.</li>
<li>Force our datetime column to have the right format with
‘sendQuery’.</li>
<li>Make our dashboard in Grafana!</li>
</ol>
<pre class="r"><code>#### FIRST TIME RUNNING

initial_run_ex2=0

if(initial_run_ex2==1){
  # Remember you should only create the table once!
dbCreateTable(sql_conn,name=&quot;wcpc&quot;, fields=concatenated_cpc)

# Write our data to the SQL database
dbWriteTable(sql_conn,&quot;wcpc&quot;,concatenated_cpc,append=TRUE, row.names=FALSE)

# Clean up datetime
dbSendQuery(sql_conn,&quot;ALTER TABLE wcpc MODIFY datetime datetime;&quot;)
}</code></pre>
</div>
<div id="dealing-with-new-files-showing-up-in-our-directory"
class="section level2">
<h2>Dealing with new files showing up in our directory</h2>
<p>Maybe now we want to run this again to check for new files and append
them… this is easier if we delete original files once they are loaded
into our SQL database, but let’s say we want to triple ensure we have
our data and want to maintain our file structure.</p>
<p>This code block uses a stored text file `loaded_cpc_files.txt’ as a
tracker of what has been loaded to our SQL database. When a new file
name is detected, it will append that file and update the
loaded_cpc_file.txt document. We can then see that this change has
occurred on Grafana.</p>
<pre class="r"><code># Specify the path to the subdirectory containing the CSV files
subdirectory_path &lt;- &quot;data/example 2/WCPC raw&quot;  # Update with the actual path

# Specify the path to the text file for storing file information
info_file &lt;- &quot;loaded_cpc_files.txt&quot;

# Function to read file information from the text file
read_file_info &lt;- function(filename) {
  if (file.exists(filename)) {
    readLines(filename)
  } else {
    character(0)
  }
}

  # Read the list of files currently in the directory
  current_files &lt;- list.files(path = subdirectory_path, pattern = &quot;*.csv&quot;, full.names = TRUE)
  
  # Read the list of files previously stored in the text file
  previous_files &lt;- read_file_info(info_file)
  
  # Find the new files that are not in the list of previously stored files
  new_files &lt;- setdiff(current_files, previous_files)
  
  # Read and append the data from new files
  if (length(new_files) &gt; 0) {
    new_data_list &lt;- lapply(new_files, function(file) {
      read.csv(file, skip = 16)
    })
    
    new_data &lt;- bind_rows(new_data_list)
    
    # Create an empty data frame to store the concatenated data
    concatenated_cpc &lt;- data.frame()
    
    # Append the new data to the concatenated_data data frame
    concatenated_cpc &lt;- bind_rows(concatenated_cpc, new_data)
    
    # Give the columns nicer names
    new_names &lt;- c(&quot;datetime&quot;, &quot;elapsed&quot;, &quot;concentration&quot;, &quot;counts&quot;, &quot;error_code&quot;)
    names(concatenated_cpc) &lt;- new_names

    #Clean up any blank rows lingering around from the csv:
    concatenated_cpc &lt;- concatenated_cpc %&gt;%
      filter(datetime != &quot;&quot; &amp; !is.na(datetime))
    
    # Append the new file names to the text file
    merged_files &lt;- c(previous_files, new_files)
    writeLines(merged_files, info_file, sep=&quot;\n&quot;)
    
    # Write our data to the SQL database
    dbWriteTable(sql_conn,&quot;wcpc&quot;,concatenated_cpc,append=TRUE, row.names=FALSE)

    # Clean up datetime
    dbSendQuery(sql_conn,&quot;ALTER TABLE wcpc MODIFY datetime datetime;&quot;)
    
    # Optionally, you can print a message indicating new data has been added
    cat(&quot;New data added from:&quot;, new_files, &quot;\n&quot;)
  }</code></pre>
<p>That’s it! Thanks for following along in today’s tutorial! If you
have any questions, feel free to reach out via email at <a
href="mailto:nzimmerman@mech.ubc.ca">nzimmerman@mech.ubc.ca</a></p>
<p>P.S. curious how I made this website? Super simple. You just need to
name your output html file “index.html” and have a YAML file called
“_site.yml” that describes your navigation bar. Then on GitHub, go to
Settings –&gt; Pages and you can render your markdown as a GitHub.io
page. Ta-da!</p>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkFBQVIgMjAyMyBEYXRhIFdyYW5nbGluZyBUdXRvcmlhbCINCmF1dGhvcjogIkRyLiBOYW9taSBaaW1tZXJtYW4iDQpkYXRlOiAiYHIgU3lzLkRhdGUoKWAiDQpvdXRwdXQ6DQogIHJtYXJrZG93bjo6aHRtbF9kb2N1bWVudDoNCiAgICB0aGVtZTogY2VydWxlYW4NCiAgICBjb2RlX2Rvd25sb2FkOiB0cnVlDQotLS0NCiMgSW50cm9kdWN0aW9uDQoNCk1hbmFnaW5nIHlvdXIgZXhwZXJpbWVudGFsIGRhdGEgaXMgaW5jcmVhc2luZ2x5IGRpZmZpY3VsdCBiZWNhdXNlIG9mIHRoZSBzaGVlciB2b2x1bWUgb2YgZGF0YSB0aGF0IGlzIGJlaW5nIGNvbGxlY3RlZCwgdGhlIGhpZ2ggdGltZSByZXNvbHV0aW9uIG9mIHRoZSBkYXRhLCB0aGUgbnVtYmVyIG9mIGRhdGEgdXNlcnMsIGFuZCBwdWJsaXNoaW5nIHJlcXVpcmVtZW50cyBvbiBtYWtpbmcgZGF0YSBhbmQgY29kZXMgb3BlbiBhbmQgYWNjZXNzaWJsZS4gVGFraW5nIHNvbWUgdGltZSB0byBsZWFybiBmcm9tIGNvcmUgZGF0YSBtYW5hZ2VtZW50IGFuZCBkYXRhIHdyYW5nbGluZyBza2lsbHMgaXMgaW1wb3J0YW50IQ0KDQpJbiB0aGlzIHR1dG9yaWFsLCB3ZSdsbCBsb29rIGF0IHRoZSBkYXRhIG1hbmFnZW1lbnQgYW5kIGFuYWx5c2lzIHBpcGVsaW5lIGZyb20gZGF0YSBpbXBvcnQgLyB1cGxvYWQgdGhyb3VnaCB0byBkYXRhIHZpc3VhbGl6YXRpb24uIFdlJ2xsIGNvbXBhcmUgYSBjb3VwbGUgb2YgZGlmZmVyZW50IGFwcHJvYWNoZXMgY29uc2lkZXJpbmcgdGhlIG5lZWRzIEkganVzdCBvdXRsaW5lZC4gVGhlIGZpcnN0IGRhdGEgc2V0IEkgYW0gcHJvdmlkaW5nIGlzIGEgcHJlLWNsZWFuZWQgZGF0YSBzZXQgZm9yIHNpbXBsaWNpdHkgYW5kIHRvIHNob3cgdGhlIHBpcGVsaW5lIGZyb20gc3RhcnQgdG8gZmluaXNoLiBJZiB3ZSBoYXZlIHRpbWUsIHdlJ2xsIGxvb2sgYXQgYSBtb3JlIGNvbXBsaWNhdGVkIHNldCBvZiBkYXRhIHRoYXQgcmVxdWlyZXMgbW9yZSBwcmUtcHJvY2Vzc2luZyBiZWZvcmUgd2UgY2FuIGxvb2sgYXQgaXQuIA0KDQpUaGVyZSBhcmUgbWFueSBjb2RpbmcgbGFuZ3VhZ2VzIHlvdSBjYW4gdXNlIHRvIHdvcmsgd2l0aCB5b3VyIGRhdGEuIEluIHRoaXMgdHV0b3JpYWwsIEkgYW0gZ29pbmcgdG8gdXNlIFN0cnVjdHVyZWQgUXVlcnkgTGFuZ3VhZ2UgKFNRTCkgYW5kIFIuIFRvIG1hbmFnZSBTUUwgZGF0YSwgSSB3aWxsIHNob3cgYW4gZXhhbXBsZSB3aXRoIFtNeVNRTF0oaHR0cHM6Ly93d3cubXlzcWwuY29tL3Byb2R1Y3RzL2NvbW11bml0eS8pLiBUaGlzIGlzIGp1c3Qgb25lIGRhdGFiYXNlIG1hbmFnZW1lbnQgc3lzdGVtLCBhbmQgbWFueSBvZiB0aGUgc2FtZSBwcmluY2lwbGVzIHdpbGwgYXBwbHkgaWYgeW91J3JlIHVzaW5nIG90aGVyIHBvcHVsYXIgU1FMIGRhdGFiYXNlIG1hbmFnZW1lbnQgc3lzdGVtcyBsaWtlIFtTUUxpdGVdKGh0dHBzOi8vd3d3LnNxbGl0ZS5vcmcvZG93bmxvYWQuaHRtbCkgb3IgW1Bvc3RncmVTUUxdKGh0dHBzOi8vd3d3LnBvc3RncmVzcWwub3JnL2Rvd25sb2FkLykuIFlvdSBqdXN0IG5lZWQgdG8gY2hhbmdlIHRoZSBSIHBhY2thZ2UgeW91IGFyZSB1c2luZyB0byBpbnRlcmZhY2Ugd2l0aCB0aGUgU1FMIGRhdGFiYXNlIG1hbmFnZW1lbnQgc3lzdGVtIHlvdSBhcmUgdXNpbmcuDQoNCkknbGwgYWxzbyBicmllZmx5IGRlbW9uc3RyYXRlIGltcG9ydGluZyB5b3VyIGRhdGEgZGlyZWN0bHkgaW50byBbUl0oaHR0cHM6Ly9jcmFuLnItcHJvamVjdC5vcmcvIA0KKSBhbmQgc29tZSBjb21tb24gcGl0ZmFsbHMgLyB3aHkgdGhlIFNRTCBhcHByb2FjaCBjYW4gYmUgcHJlZmVyYWJsZS4NCg0KT25jZSBvdXIgZGF0YSBpcyBpbiBbUl0oaHR0cHM6Ly9jcmFuLnItcHJvamVjdC5vcmcvIA0KKSB1c2luZyBbUlN0dWRpb10oaHR0cHM6Ly9wb3NpdC5jby9kb3dubG9hZC9yc3R1ZGlvLWRlc2t0b3AvIA0KKSwgYSBwb3B1bGFyIGludGVncmF0ZWQgZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnQgKElERSkgZm9yIFIsIHdlJ2xsIGRvIHNvbWUgcXVpY2sgdmlzdWFsaXphdGlvbnMsIGludHJvZHVjaW5nIHlvdSB0byBhIHBvcHVsYXIgY29sbGVjdGlvbiBvZiBSIGNvZGluZyBwYWNrYWdlcyBjYWxsZWQgdGhlIFsndGlkeXZlcnNlJ10oaHR0cHM6Ly93d3cudGlkeXZlcnNlLm9yZy8pLiBUaGlzIHNoYXJlcyBtYW55IHByaW5jaXBsZXMgd2l0aCB0aGUgWydwYW5kYXMnXShodHRwczovL3BhbmRhcy5weWRhdGEub3JnLykgc29mdHdhcmUgbGlicmFyeSBpbiBbUHl0aG9uXShodHRwczovL3d3dy5weXRob24ub3JnL2Rvd25sb2Fkcy8pLiBTbyB3aGlsZSB3ZSB3aWxsIHdvcmsgaW4gUi9SU3R1ZGlvIHRvZGF5LCBhZ2FpbiwgbWFueSBvZiB0aGUgaWRlYXMgb3IgcHJvY2Vzc2VzIGNhbiBiZSByZXBsaWNhdGVkIGluIFB5dGhvbiAoZm9yIGV4YW1wbGUgdXNpbmcgdGhlIFtQeUNoYXJtIElERV0oaHR0cHM6Ly93d3cuamV0YnJhaW5zLmNvbS9weWNoYXJtL2Rvd25sb2FkLykpLiBJdCdzIGp1c3QgYSBtYXR0ZXIgb2YgcGVyc29uYWwgcHJlZmVyZW5jZSA6KSANCg0KVG8gbWFuYWdlIG91ciBSIGNvZGVzIGFuZCB0YWtlIG5vdGVzIC8gc2hhcmUgaW50ZXJpbSBwbG90cywgd2UnbGwgYmUgdXNpbmcgYSBtYXJrZG93biBmaWxlLiBJJ20gdHlwaW5nIHRoaXMgdHV0b3JpYWwgcmlnaHQgbm93IGluIGFuIFIgTWFya2Rvd24gZmlsZS4gVmVyeSBtZXRhLiBBbm90aGVyIHBvcHVsYXIgcGllY2Ugb2Ygc29mdHdhcmUgZm9yIG1hcmtkb3duIGZpbGVzIHdpdGggZW1iZWRkZWQgUiBvciBQeXRob24gY29kaW5nIGlzIFtKdXB5dGVyIE5vdGVib29rc10oaHR0cHM6Ly9qdXB5dGVyLm9yZy8pLiBXZSB3b24ndCBydW4gYW55IEp1cHl0ZXIgbm90ZWJvb2tzLCBidXQgSSB3aWxsIHNob3cgeW91IGJyaWVmbHkgd2hhdCB0aGV5J3JlIGFsbCBhYm91dC4gDQoNCkFzIHdlIHdvcmsgdGhyb3VnaCBvdXIgZGF0YSwgd2UgYWxsIGtub3cgdGhhdCBhbmFseXNpcyBjYW4gdGFrZSB0aW1lLiBPciBwZXJoYXBzIHdlIHdhbnQgdG8gcnVuIGEgY29kZSB0aGF0IG1pZ2h0IGJyZWFrIGV2ZXJ5dGhpbmcgKGhhcHBlbnMgdG8gdGhlIGJlc3Qgb2YgdXMhKSBhbmQgd2Ugd2FudCB0byBtYWtlIHN1cmUgd2UgY2FuIHJlc3RvcmUgb3VyIHByZXZpb3VzIGNvZGUuIFZlcnNpb24gY29udHJvbCBpcyB5b3VyIGZyaWVuZCBoZXJlIGFuZCBpdCdzIHNvIGVhc3kgdG8gZG8gd2l0aCBbR2l0XShodHRwczovL2dpdC1zY20uY29tL2Rvd25sb2FkcyksIHdoaWNoIGlzIGEgZGlzdHJpYnV0ZWQgdmVyc2lvbiBjb250cm9sIHN5c3RlbSB0aGF0IHRyYWNrcyBjaGFuZ2VzIGluIGFueSBzZXQgb2YgY29tcHV0ZXIgZmlsZXMuIFdlJ2xsIHVzZSB0aGUgW0dpdGh1Yl0oaHR0cHM6Ly9naXRodWIuY29tL2pvaW4gDQopIHBsYXRmb3JtIGFzIG91ciBjb252ZW5pZW50IGNsb3VkLWJhc2VkIHN5c3RlbSB0byBleGVjdXRlIG91ciBHaXQgdmVyc2lvbiBjb250cm9sLiBBIG5pY2UgZmVhdHVyZSBvZiBHaXRodWIgaXMgdGhhdCB3ZSBjYW4gYWxzbyBlYXNpbHkgY29udmVydCBvdXIgTWFya2Rvd24gZmlsZXMgaW50byB3ZWJwYWdlcyAod2hpY2ggaXMgd2hhdCB5b3UncmUgcmVhZGluZyByaWdodCBub3chKS4gU28gY29vbCwgcmlnaHQ/DQoNCkxhc3RseSwgaWYgeW91IGhhdmUgYSBsb3Qgb2YgZGF0YSBiZWluZyBjb2xsZWN0ZWQgcm91dGluZWx5LCBpdCBjYW4gYmUgY29vbCB0byBzaG93IHlvdXIgZGF0YS4gV2UnbGwgZG8gYSBzaW1wbGUgZXhhbXBsZSBpbiBbR3JhZmFuYV0oaHR0cHM6Ly9ncmFmYW5hLmNvbS9ncmFmYW5hL2Rvd25sb2FkKSwgd2hpY2ggaXMgYW4gb3BlbiBzb3VyY2UgYW5hbHl0aWNzIGFuZCBpbnRlcmFjdGl2ZSB2aXN1YWxpemF0aW9uIHdlYiBhcHBsaWNhdGlvbi4NCg0KV2hhdCB3ZSdsbCBjb3ZlciB0b2RheSBpcyBhIGxvdCBmb3IgYSAxIGhvdXIgNDUgbWludXRlIHNlc3Npb24gLSBhbmQgdGhhdCdzIG9rYXkhIFRoZSBnb2FsIGlzIHRoYXQgeW91IGNvbWUgb3V0IG9mIHRoaXMgdHV0b3JpYWwgd2l0aCBzb21lIGlkZWFzLCBuZXcgdGVybWlub2xvZ3kgYW5kIGFuIGludGVyZXN0IGluIGxlYXJuaW5nIG1vcmUuIElmIHlvdSB0YWtlIHRoZSB0aW1lIHRvIGxlYXJuIHRoZXNlIHByaW5jaXBsZXMgYW5kIGFwcHJvYWNoZXMgZWFybHkgb24gaW4geW91ciBwcm9ncmFtLCB5b3UnbGwgaGF2ZSBhbiBlYXNpZXIgdGltZSBkb3duIHRoZSByb2FkIHdoZW4geW91J3JlIHRyeWluZyB0byBhZGRyZXNzIFJldmlld2VyIDIgY29tbWVudHMgYWxtb3N0IGEgeWVhciBhZnRlciBhIHBhcGVyIHdhcyBvcmlnaW5hbGx5IGRldmVsb3BlZCwgYmVjYXVzZSB5b3UgbGVmdCB5b3Vyc2VsZiBhbiBhd2Vzb21lIHBhcGVyIHRyYWlsLiBGdXR1cmUgeW91IGlzIGFscmVhZHkgdGhhbmtpbmcgeW91ISBOb3cgd2l0aG91dCBmdXJ0aGVyIGFkbywgbGV0J3MgZ2V0IHN0YXJ0ZWQuDQoNCiMjIEdldHRpbmcgeW91cnNlbGYgc2V0LXVwDQpJZiB5b3Ugd2FudCB0byBmb2xsb3cgYWxvbmcgaW4gcmVhbC10aW1lLCB5b3UnbGwgbmVlZCB0aGUgZm9sbG93aW5nIHRvb2xzIGluc3RhbGxlZCBvbiB5b3VyIG1hY2hpbmUuIE5vdGUgdGhhdCBJIHRlc3RlZCB0aGlzIHR1dG9yaWFsIGluIHRoZSBXaW5kb3dzIG9wZXJhdGluZyBzeXN0ZW0uIEkgY2FuJ3QgbWFrZSBhbnkgZ3VhcmFudGVlcyBpdCB3aWxsIHdvcmsgMTAwJSBzbW9vdGhseSBpbiBhIG1hY09TIG9yIExpbnV4IG9wZXJhdGluZyBzeXN0ZW0sIGJ1dCB0aGVyZSBzaG91bGRuJ3QgYmUgdG9vIG1hbnkgcGl0ZmFsbHMgd2l0aCB0aGlzLg0KDQpUb29scyBuZWVkZWQ6DQoNCiogTXlTUUwgWyhDbGljayBoZXJlIGZvciBZb3VUdWJlIHR1dG9yaWFsIGZvciBpbnN0YWxsaW5nIE15U1FMIG9uIFdpbmRvd3MgMTEpXShodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PXFCQlhCWlhLaTB3KQ0KKiBSIGFuZCBSU3R1ZGlvIFsoQ2xpY2sgaGVyZSBmb3IgWW91VHViZSB0dXRvcmlhbCBmb3IgaW5zdGFsbGluZyBSIGFuZCBSU3R1ZGlvKV0oaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1ZckVlMlRMcjNNSSkNCiogR2l0IGFuZCBhIEdpdGh1YiBhY2NvdW50IFsoQ2xpY2sgaGVyZSBmb3IgYSBHaXRodWIgR3VpZGUgb24gSW5zdGFsbGluZyBHaXQpXShodHRwczovL2dpdGh1Yi5jb20vZ2l0LWd1aWRlcy9pbnN0YWxsLWdpdCkNCiogQ29ubmVjdCBHaXQgdG8gUlN0dWRpbyBbKENsaWNrIGhlcmUgZm9yIGEgWW91VHViZSB0dXRvcmlhbCBvbiBjb25uZWN0aW5nIEdpdCBhbmQgR2l0aHViIHRvIGFuIFJTdHVkaW8gUHJvamVjdCldKGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9YlVvTjg1UXZDMTApDQoNCk90aGVyIG5vdGVzOg0KDQoqIFRoaXMgdHV0b3JpYWwgd2lsbCByZXF1aXJlIGEgYnVuY2ggb2YgUiBwYWNrYWdlcyB0byBiZSBpbnN0YWxsZWQgLSBidXQgZG9uJ3Qgd29ycnksIEkgaGF2ZSBwYXJ0cyBvZiB0aGUgY29kZSBibG9ja3MgYmVsb3cgdGhhdCB3aWxsIGluc3RhbGwgYW55IFIgcGFja2FnZXMgeW91IG1pZ2h0IG5lZWQgdGhhdCB5b3UgZG9uJ3QgYWxyZWFkeSBoYXZlIDopDQoqIEFsbCB0aGUgZGF0YSwgY29kZXMgYW5kIG1hcmtkb3duIGZpbGVzIGFyZSBhdmFpbGFibGUgaW4gdGhlIEdpdGh1YiByZXBvc2l0b3J5IFsoQ2xpY2sgaGVyZSB0byBhY2Nlc3MpXShodHRwczovL2dpdGh1Yi5jb20vbnppbW1lcm1hbi11YmMvQUFBUjIwMjMtdHV0b3JpYWwpDQoqIElmIHlvdSBqdXN0IHdhbnQgdGhlIFIgTWFya2Rvd24gZmlsZSwgeW91IGNhbiBkb3dubG9hZCBpdCBmcm9tIHRoZSB1cHBlciByaWdodCBjb3JuZXIgb2YgdGhlIHBhZ2UuDQoNCiMgUGFydCAwOiBWZXJzaW9uIENvbnRyb2wNCkluIGRldmVsb3BpbmcgdGhpcyB0dXRvcmlhbCwgSSB1c2VkIHZlcnNpb24gY29udHJvbCB1c2luZyBHaXQgYW5kIEdpdGh1Yi4gSWYgeW91J3JlIGluIGFjYWRlbWlhLCBHaXRodWIgaXMgZ3JlYXQgYmVjYXVzZSB5b3UgY2FuIGdldCBhY2Nlc3MgdG8gbWFueSBwYWlkIGZlYXR1cmVzIGZvciBmcmVlIChtYWtpbmcgcGFnZXMgZnJvbSBwcml2YXRlIHJlcG9zaXRvcmllcywgY3JlYXRpbmcgb3JnYW5pemF0aW9ucywgZXRjLikuIFlvdSBjYW4gaW50ZXJhY3Qgd2l0aCBHaXQgaW4gUlN0dWRpbyB2ZXJ5IGVhc2lseSBhZnRlciBpdCdzIGluc3RhbGxlZCAoc2VlIGxpbmtzIGZyb20gdGhlIEludHJvZHVjdGlvbikuIE9uY2UgeW91J3ZlIHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQgR2l0IGFuZCBtYWRlIGl0IGFjY2Vzc2libGUgaW4gUlN0dWRpbywgeW91J2xsIHNlZSBhIGxpdHRsZSAiR2l0IiB0YWIgaW4gdGhlIHRvcCByaWdodCBwYW5lbC4gV2UgY2FuIHVzZSB0aGlzIHBhbmVsIHRvIHF1aWNrbHkgQ29tbWl0IGNoYW5nZXMgdG8gb3VyIHJlcG9zaXRvcnksIHZpZXcgZmlsZSBhZGRpdGlvbnMgb3IgZGVsZXRpb25zLCBldGMuIA0KDQpUaG9zZSB3aG8gYXJlIGZhbWlsaWFyIHdpdGggR2l0IG1heSBwcmVmZXIgdG8gdXNlIHRoZSBjb21tYW5kIGxpbmUgLSB0aGF0J3Mgb3V0c2lkZSBvZiB0aGUgc2NvcGUgb2Ygb3VyIHR1dG9yaWFsIHRvZGF5LCBidXQgeW91IGNhbiBhY2Nlc3MgdGhlIHRlcm1pbmFsIGZyb20gUlN0dWRpbyBpbiB0aGUgIlRlcm1pbmFsIiB0YWIgb2YgdGhlIGJvdHRvbSBsZWZ0IHBhbmVsLg0KDQpJIHdpbGwgbm93IHF1aWNrbHkgZGVtb25zdHJhdGUgbWFraW5nIGEgY2hhbmdlLCBjb21taXR0aW5nIHRoYXQgY2hhbmdlLCBhbmQgcHVzaGluZyBteSBjaGFuZ2UgdG8gR2l0aHViLg0KDQojIyBGb3JraW5nIHRoZSBkaXJlY3RvcnkNCklmIHlvdSB3YW50IHRvIGZvbGxvdyBhbG9uZyBpbiByZWFsLXRpbWUgd2l0aCB0aGlzIHR1dG9yaWFsLCBuYXZpZ2F0ZSB0byB0aGlzIHR1dG9yaWFsJ3MgcmVwb3NpdG9yeSBbKENsaWNrIGhlcmUgdG8gYWNjZXNzKV0oaHR0cHM6Ly9naXRodWIuY29tL256aW1tZXJtYW4tdWJjL0FBQVIyMDIzLXR1dG9yaWFsKSBhbmQgY3JlYXRlIGEgZm9yayAod2hpY2ggd2lsbCBjcmVhdGUgYSBsb2NhbCBjb3B5IGluIHlvdXIgb3duIHJlcG9zaXRvcnkpLiANCg0KIyBQYXJ0IDE6IFNRTCBTZXQtdXAgYW5kIExvZ2lzdGljcw0KQmVmb3JlIHdlIGNhbiBzdGFydCBwbGF5aW5nIHdpdGggZGF0YSwgd2UncmUgZ29pbmcgdG8gbWFrZSBzdXJlIHdlIGhhdmUgc2V0IHVwIGFuZCBjb25maWd1cmVkIE15U1FMIG9uIG91ciBtYWNoaW5lLiBXZSdsbCBkbyB0aGlzIHBhcnQgbGl2ZSwgc28gZm9sbG93IGFsb25nLiBXZSBjYW4gaW50ZXJhY3Qgd2l0aCBNeVNRTCBpbiBhIGZldyB3YXlzOg0KDQoqIE15U1FMIFdvcmtiZW5jaDogQSBHcmFwaGljYWwgVXNlciBJbnRlcmZhY2UgZm9yIHlvdXIgU1FMIGRhdGENCiogVGhlIGNvbW1hbmQgbGluZQ0KDQpUaGUgbmljZSB0aGluZyBhYm91dCB0aGUgd29ya2JlbmNoIGlzIHRoYXQgaXQgY2FuIGhlbHAgeW91IGxlYXJuIGhvdyB0byB3cml0ZSBhbmQgcGFyc2UgU1FMIHF1ZXJpZXMsIHNpbmNlIGl0IHdpbGwgdHJhbnNsYXRlIHlvdXIgcmVxdWVzdCBpbnRvIHRoZSBxdWVyeS4gU28gd2UnbGwgbW9zdGx5IGJlIHVzaW5nIHRoZSBXb3JrYmVuY2ggdG8gY2hlY2sgdGhhdCBvdXIgd29yayBpcyBiZWluZyBzdG9yZWQgY29ycmVjdGx5LCBidXQgSSB3aWxsIHNob3cgc29tZSBxdWljayBleGFtcGxlcyBpbiB0aGUgY29tbWFuZCBsaW5lIHRvbyBsYXRlciBvbiBpbiB0aGUgdHV0b3JpYWwuIA0KDQpPbmNlIHdlIGhhdmUgc2V0IHVwIE15U1FMIG9uIG91ciBtYWNoaW5lLCBtYWtpbmcgbm90ZSBvZiB0aGUgTXlTUUwgdXNlciAoYW5kIHRoZWlyIGNyZWRlbnRpYWxzIHRvIHdyaXRlIG5ldyB0YWJsZXMgZXRjLiksIHdlIGNhbiBzdGFydCB3b3JraW5nIGluIFIgdG8gaW1wb3J0IG91ciBkYXRhLCB3cml0ZSBpdCB0byBTUUwsIGFuZCBiZSBvZmYgdG8gdGhlIHJhY2VzLiANCg0KX0Egbm90ZSBvbiBob3cgSSdtIHVzaW5nIFNRTCBoZXJlOl8gT25lIG9mIHRoZSBjb3JlIGZlYXR1cmVzIG9mIGFuIFNRTCBkYXRhYmFzZSBpcyB0aGF0IHlvdSBjYW4gbGluayBkaWZmZXJlbnQgc2NoZW1lICh0aGluayB0YWJsZXMpIHRvZ2V0aGVyIHdpdGgga2V5cy4gS2V5cyBjYW4gYmUgdXNlZCB0byBjcmVhdGUgYSByZWxhdGlvbnNoaXAgYW1vbmcgZGlmZmVyZW50IGRhdGFiYXNlIHRhYmxlcyBvciB2aWV3cy4gVGhpcyBpc24ndCBhIHR1dG9yaWFsIG9uIFNRTCwgc28gd2UncmUga2VlcGluZyBpdCBzaW1wbGUgdG9kYXkuIEJ1dCBpZiBTUUwgaXMgc29tZXRoaW5nIHlvdSB3YW50IHRvIGxlYXJuLCB0aGlzIGlzIGEgcHJldHR5IGZ1bmRhbWVudGFsIGNvbmNlcHQgdG8ga2VlcCBpbiBtaW5kLg0KDQojIyBEaXZpbmcgaW50byBSDQoNCldoYXQgeW91J3JlIGxvb2tpbmcgYXQgcmlnaHQgbm93IGlzIGFuIEhUTUwgdmVyc2lvbiBvZiBhbiBSTWFya2Rvd24gZmlsZSB0aGF0IEkgcHJlcGFyZWQgZm9yIHRoaXMgdHV0b3JpYWwuIEEgbWFya2Rvd24gZG9jdW1lbnQgYWxsb3dzIG1lIHRvIGNvbWJpbmUgdGV4dCwgY29kZSBibG9ja3MsIGFuZCBvdXRwdXRzIG9mIHRob3NlIGNvZGVzIGluIG9uZSBwbGFjZS4gSWYgeW91IGRvd25sb2FkIHRoZSAnUm1kJyBmaWxlIGZyb20gdGhlIHdlYnNpdGUsIHlvdSBjYW4gc2VlIHdoYXQgdGhlIE1hcmtkb3duIGRvY3VtZW50IGxvb2tzIGxpa2UgaW4gaXRzIHJhdyBmb3JtLiBXaGVuIHlvdSdyZSBkb25lIGVkaXRpbmcsIHlvdSBjYW4gc2VlIHRoZSBmb3JtYXR0ZWQgaHRtbCB2ZXJzaW9uIGJ5ICJLbml0dGluZyIuDQoNCiMjIyAoX0FuIEFzaWRlXykgSnVweXRlciBOb3RlYm9va3MNCg0KQSB2ZXJ5IHBvcHVsYXIgYWx0ZXJuYXRpdmUgdG8gUiBNYXJrZG93biBkb2N1bWVudHMgaXMgSnVweXRlciBOb3RlYm9va3MuIElmIFB5dGhvbiBpcyB5b3VyIHRoaW5nLCB5b3UnbGwgcHJvYmFibHkgcHJlZmVyIHRoZW0uIFlvdSBjYW4gYWxzbyBhZGQgaW4gUiB0byBKdXB5dGVyIG5vdGVib29rcyBhbmQgZXZlbiB0b2dnbGUgYmV0d2VlbiBSIGNvZGUgYmxvY2tzIGFuZCBQeXRob24gY29kZSBibG9ja3MgaW4gb25lIHBsYWNlLiBMZXQncyB0YWtlIGEgcXVpY2sgcGVlayBhdCB0aGUgSnVweXRlciBub3RlYm9va3MgZWNvc3lzdGVtIHNvIHlvdSBjYW4gbWFrZSBhIG1lbnRhbCBub3RlIHRvIGxlYXJuIG1vcmUgYW5vdGhlciBkYXkuDQoNCg0KIyMjIFIgU2V0LXVwOiBMaWJyYXJpZXMgYW5kIFBhY2thZ2VzDQpJbiB0aGlzIGZpcnN0IGNvZGUgYmxvY2ssIHdlJ3JlIGdvaW5nIHRvICgxKSBjaGVjayBmb3IgdGhlIG5lY2Vzc2FyeSBwYWNrYWdlcyB0byBleGVjdXRlIHRoZSBjb2RlcyBpbiB0aGlzIE1hcmtkb3duIGRvY3VtZW50LCAoMikgaW5zdGFsbCB0aG9zZSBwYWNrYWdlcyBpZiB5b3UgaGF2ZW4ndCBhbHJlYWR5IGluc3RhbGxlZCB0aGVtLCBhbmQgKDMpIGxvYWQgdGhlIHBhY2thZ2VzIGlmIGluc3RhbGxlZC4NCg0KSSBsaWtlIHRoZSAncGFjbWFuJyBwYWNrYWdlIHRvIHN0cmVhbWxpbmUgdGhpcyBwcm9jZXNzLCBzaW5jZSB5b3UgY2FuIGp1c3QgZ2l2ZSBpdCBhIGxpc3Qgb2YgcGFja2FnZXMgd2l0aGluIHRoZSAncF9sb2FkJyBjb21tYW5kIHRoYXQgd2lsbCBlbGVnYW50bHkgaW5zdGFsbCBhbnkgbWlzc2luZyBwYWNrYWdlcyBhbmQgdGhlbiBsb2FkIHRoZW0uDQoNCmBgYHtyIHNldHVwLCBpbmNsdWRlPVRSVUV9DQoNCiMgQ2hlY2sgZm9yIHBhY21hbiBhbmQgbG9hZA0KaWYgKCFyZXF1aXJlKCJwYWNtYW4iKSkgaW5zdGFsbC5wYWNrYWdlcygicGFjbWFuIik7IGxpYnJhcnkocGFjbWFuKQ0KDQojIEluc3RhbGwgLyBsb2FkIHJlcXVpcmVkIHBhY2thZ2VzDQpwX2xvYWQoREJJLFJPREJDLG9kYmMsZGJwbHlyLFJNeVNRTCx0aWR5dmVyc2Usa2V5cmluZyxjb24yYXFpLGx1YnJpZGF0ZSwgc3RyaW5ncikNCmBgYA0KDQojIyMgUiBTZXQtdXA6IFNRTCBDb25uZWN0aW9uDQoNClRoZSBwYWNrYWdlcyB3ZSBoYXZlIGxvYWRlZCAoc3BlY2lmaWNhbGx5OiBEQkksIFJPREJDLCBPREJDIGFuZCBkYnBseXIpIHdpbGwgbGV0IHVzIGNvbm5lY3QgdG8gYW5kIG1hbmlwdWxhdGUgYW4gU1FMIGRhdGFiYXNlLiBMZXQncyBmaXJzdCBjaGVjayB0byBtYWtlIHN1cmUgd2UgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgZHJpdmVycyBpbnN0YWxsZWQgdG8gcnVuIHRoZXNlIHBhY2thZ2VzIHN1Y2Nlc3NmdWxseSwgYW5kIHRoZW4gY29ubmVjdCB0byBvdXIgU1FMIGRhdGFiYXNlLg0KDQoobm90ZSwgaWYgeW91IGRvbid0IGhhdmUgYW4gZW1wdHkgZGF0YWJhc2UgdG8gd29yayB3aXRoLCB3ZSBjYW4gY3JlYXRlIG9uZSBpbiBlaXRoZXIgdGhlIE15U1FMIHdvcmtiZW5jaCBvciBpbiB0aGUgY29tbWFuZCBsaW5lKQ0KDQo+IG15c3FsIC11IHJvb3QgLXANCg0KPiBDUkVBVEUgREFUQUJBU0UgbGl2ZWRlbW87DQoNCllvdSdsbCBub3RpY2UgaW4gdGhlIGNvZGUgYmxvY2sgYmVsb3cgdGhhdCBJIGhhdmVuJ3QgYWN0dWFsbHkgc2hvd24geW91IG15IE15U1FMIHBhc3N3b3JkIC0gdGhpcyBpcyBnb29kIGNvZGluZyBwcmFjdGljZS4gSXQncyBub3QgYSBnb29kIGlkZWEgdG8gYmUgd2lkZWx5IHNoYXJpbmcgcGFzc3dvcmRzLCBBUEkga2V5cyBldGMuIFRoZSBiZXN0IGFwcHJvYWNoIGhlcmUgaXMgdG8gc3RvcmUgeW91ciBwYXNzd29yZCBhcyBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS4gSSBsaWtlIHRoZSAna2V5cmluZycgcGFja2FnZSB0byBkbyB0aGlzIGZvciBtZS4gSSBoYXZlIHByZXZpb3VzbHkgc3RvcmVkIG15IHBhc3N3b3JkIGFuZCBzbyBJIGNhbiBqdXN0IHVzZSB0aGUga2V5X2dldCBmdW5jdGlvbiB0byBsb2FkIGl0LiBIb29yYXkhDQoNCmBgYHtyIFNRTC1jb25uZWN0LCBpbmNsdWRlPVRSVUV9DQoNCiMgRmlyc3QgY2hlY2sgdGhhdCB0aGUgTXlTUUwgZHJpdmVyIGlzIGxpc3RlZCBoZXJlIGJlZm9yZSBwcm9jZWVkaW5nLg0Kc29ydCh1bmlxdWUob2RiY0xpc3REcml2ZXJzKClbWzFdXSkpDQoNCiMgTm93IGNvbm5lY3QgdG8gb3VyIFNRTCBkYXRhYmFzZSB1c2luZyB0aGUgJ2RiQ29ubmVjdCcgZnVuY3Rpb246DQoNCnNxbF9jb25uIDwtIGRiQ29ubmVjdChSTXlTUUw6Ok15U1FMKCksDQogICAgICAgICAgICAgICAgICBkYm5hbWUgPSAiYWFhcjIwMjN0dXRvcmlhbCIsDQogICAgICAgICAgICAgICAgICBTZXJ2ZXIgPSAibG9jYWxob3N0IiwNCiAgICAgICAgICAgICAgICAgIHBvcnQgPSAzMzA2LA0KICAgICAgICAgICAgICAgICAgdXNlciA9ICJyb290IiwNCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkID0ga2V5X2dldCgiTVlTUUxfUEFTU1dPUkQiKQ0KICAgICAgICAgICAgICAgICAgKQ0KYGBgDQoNCiMgUGFydCAyOiBCdWlsZGluZyBvdXIgU1FMIERhdGFiYXNlIGFuZCBRdWVyeWluZyBpdDsgRXhhbXBsZSAxDQoNCkluIG91ciBmaXJzdCBleGFtcGxlLCB3ZSBoYXZlIHNvbWUgcHJlLWNsZWFuZWQgZGF0YSBmcm9tIGEgZGVwbG95bWVudCBsYXN0IHllYXIgaW4gVmFuY291dmVyLCBCQy4gSW4gdGhpcyBkZXBsb3ltZW50LCB3ZSBoYWQgMTEgbXVsdGktcG9sbHV0YW50IGxvdy1jb3N0IHNlbnNvcnMsIGFuZCBhbHNvIGNvbGxlY3RlZCBkYXRhIGZyb20gNCByZWd1bGF0b3J5IG1vbml0b3Jpbmcgc3RhdGlvbnMgdG8gY29tcGFyZSBvdXIgZm9jdXMgbmVpZ2hib3Job29kIHRvIHRoZSBzdXJyb3VuZGluZyByZWdpb24uIExldCdzIGxvYWQgdGhlIG1ldGFkYXRhIGZyb20gdGhpcyBleGFtcGxlIGFuZCBzaG93IGl0IGFzIGEgdGFibGUuDQoNCmBgYHtyIGV4MS1pbnRybywgaW5jbHVkZT1UUlVFfQ0KbWV0YWRhdGEgPC0gcmVhZF9jc3YoImRhdGEvZXhhbXBsZSAxL21ldGFkYXRhLmNzdiIsIHNob3dfY29sX3R5cGVzID0gRkFMU0UpDQprbml0cjo6a2FibGUobWV0YWRhdGEpDQpgYGANCkZvciBlYWNoIG9mIHRoZXNlIGxvY2F0aW9ucywgSSBoYXZlIHByb3ZpZGVkIGFib3V0IDQgbW9udGhzIG9mIGRhaWx5IGF2ZXJhZ2UgY29uY2VudHJhdGlvbnMgb2YgTk9+Mn4sIFBNfjIuNX4sIGFuZCBPfjN+LiBJIHdhbnQgdG8gZmlyc3QgY3JlYXRlIHNvbWUgU1FMIHRhYmxlcyB0byBzdG9yZSB0aGlzIGRhdGEsIGxvYWQgdGhlIGRhdGEgaW50byB0aG9zZSB0YWJsZXMsIGFuZCB0aGVuIHVzZSB0aGUgU1FMIHF1ZXJ5IGZvcm1hdCB0byBzdGFydCBtYWtpbmcgc29tZSBhbmFseXNlcyBhbmQgZmlndXJlcy4NCg0KIyMgTG9hZCB0aGUgZGF0YSBhbmQgY3JlYXRlIHRoZSB0YWJsZXMNCg0KTm90ZSBJIGhhdmUgcHV0IGluIGEgZmxhZyBoZXJlIG9mIDAgb3IgMSBpZiB0aGlzIGlzIHlvdXIgZmlyc3QgdGltZSBleGVjdXRpbmcgdGhlIHNjcmlwdC4gSWYgeW91J3JlIHJ1bm5pbmcgaXQgZm9yIHRoZSBmaXJzdCB0aW1lLCBzZXQgaW5pdGlhbF9ydW4gdG8gIjEiLCBvdGhlcndpc2Ugc2V0IGl0IHRvICIwIiB0byBza2lwIHRvIHRoZSBuZXh0IHN0ZXBzLiBTUUwgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB5b3UgdHJ5IGFuZCBjcmVhdGUgYSBuZXcgdGFibGUgdGhhdCBhbHJlYWR5IGV4aXN0cy4NCg0KV2UgYWxzbyBuZWVkIHRvIHNldCBzb21lIHBlcm1pc3Npb25zIG9uIHRoZSBSIGFuZCBNeVNRTCBzaWRlIG9mIHRoaW5ncyB0byBtYWtlIHN1cmUgd2UgY2FuIHdyaXRlIGZyb20gdGhlc2UgbG9jYWwgZmlsZXMuIEZvciB0aGVzZSBwZXJtaXNzaW9ucyBpbiBSLCB0aGlzIGlzIGVtYmVkZGVkIGluIHRoZSBjb2RlLiBGb3IgdGhlIE15U1FMIHNpZGUsIHlvdSB3aWxsIG5lZWQgdG8gZWRpdCB0aGUgIm15LmluaSIgY29uZmlndXJhdGlvbiBmaWxlIHVzaW5nIE5vdGVwYWQgb3Igb3RoZXIgdGV4dCBlZGl0b3IgYW5kIGFkZCB0aGUgc3RhdGVtZW50ICJsb2NhbF9pbmZpbGU9MSIgdW5kZXIgdGhlIFtjbGllbnRdLCBbbXlzcWxdLCBhbmQgW215c3FsZF0gc2VjdGlvbnMgb2YgdGhlIGZpbGUgYW5kIHNhdmUgaXQuIEknbGwgc2hvdyB5b3UgdGhpcyBub3cuDQoNCmBgYHtyIFNRTC1jcmVhdGV0YWJsZXMsIGluY2x1ZGU9VFJVRX0NCmluaXRpYWxfcnVuPTANCg0KaWYoaW5pdGlhbF9ydW49PTEpew0KIyMgVGhpcyBzaG91bGQgb25seSBiZSBydW4gb25jZS4NCg0KIyBMb2FkIG91ciBkYXRhDQoNCk5PMl9kYWlseSA8LSByZWFkX2NzdigiZGF0YS9leGFtcGxlIDEvTk8yX2RhaWx5LmNzdiIsIGNvbF90eXBlcyA9IGNvbHMoZGF0ZSA9IGNvbF9kYXRlKGZvcm1hdCA9ICIlbS8lZC8lWSIpKSwgc2hvd19jb2xfdHlwZXMgPSBGQUxTRSkNCk8zX2RhaWx5IDwtIHJlYWRfY3N2KCJkYXRhL2V4YW1wbGUgMS9PM19kYWlseS5jc3YiLCBjb2xfdHlwZXMgPSBjb2xzKGRhdGUgPSBjb2xfZGF0ZShmb3JtYXQgPSAiJW0vJWQvJVkiKSksIHNob3dfY29sX3R5cGVzID0gRkFMU0UpDQpQTV9kYWlseSA8LSByZWFkX2NzdigiZGF0YS9leGFtcGxlIDEvUE1fZGFpbHkuY3N2IiwgY29sX3R5cGVzID0gY29scyhkYXRlID0gY29sX2RhdGUoZm9ybWF0ID0gIiVtLyVkLyVZIikpLCBzaG93X2NvbF90eXBlcyA9IEZBTFNFKQ0KDQojIFNvIHRoYXQgd2UgY2FuIHBlcm1pdCB3cml0aW5nIHRvIFNRTCBmcm9tIFIhDQpkYlNlbmRRdWVyeShzcWxfY29ubiwgIlNFVCBHTE9CQUwgbG9jYWxfaW5maWxlID0gdHJ1ZTsiKQ0KDQojIGNyZWF0ZSB0YWJsZXMgaW4geW91ciBTUUwgZGF0YWJhc2UNCmRiQ3JlYXRlVGFibGUoc3FsX2Nvbm4sbmFtZT0ibm8yX2RhaWx5IiwgZmllbGRzPU5PMl9kYWlseSkNCmRiQ3JlYXRlVGFibGUoc3FsX2Nvbm4sbmFtZT0ibzNfZGFpbHkiLCBmaWVsZHM9TzNfZGFpbHkpDQpkYkNyZWF0ZVRhYmxlKHNxbF9jb25uLG5hbWU9InBtX2RhaWx5IiwgZmllbGRzPVBNX2RhaWx5KQ0KDQojIHdyaXRlIG91ciBkYXRhIHRvIHRoZSBTUUwgZGF0YWJhc2UNCmRiV3JpdGVUYWJsZShzcWxfY29ubiwibm8yX2RhaWx5IixOTzJfZGFpbHksYXBwZW5kPVRSVUUsIHJvdy5uYW1lcz1GQUxTRSkNCmRiV3JpdGVUYWJsZShzcWxfY29ubiwibzNfZGFpbHkiLE8zX2RhaWx5LGFwcGVuZD1UUlVFLCByb3cubmFtZXM9RkFMU0UpDQpkYldyaXRlVGFibGUoc3FsX2Nvbm4sInBtX2RhaWx5IixQTV9kYWlseSxhcHBlbmQ9VFJVRSwgcm93Lm5hbWVzPUZBTFNFKQ0KDQojIFJNeVNRTCBoYXMgc29tZSBxdWlya3Mgd2hlcmUgaXQgcmVhbGx5IGZpZ2h0cyBwdXNoaW5nIHRoZSBkYXRhIGluIGEgY29ycmVjdCBkYXRldGltZSBmb3JtYXQsIHNvIHdlIG1hbnVhbGx5IHNlbmQgYSBxdWVyeSB0byBTUUwgdG8gbWFrZSBzdXJlIGl0J3MgZm9ybWF0dGVkIGNvcnJlY3RseSENCmRiU2VuZFF1ZXJ5KHNxbF9jb25uLCJBTFRFUiBUQUJMRSBubzJfZGFpbHkgTU9ESUZZIGRhdGUgZGF0ZXRpbWU7IikNCmRiU2VuZFF1ZXJ5KHNxbF9jb25uLCJBTFRFUiBUQUJMRSBvM19kYWlseSBNT0RJRlkgZGF0ZSBkYXRldGltZTsiKQ0KZGJTZW5kUXVlcnkoc3FsX2Nvbm4sIkFMVEVSIFRBQkxFIHBtX2RhaWx5IE1PRElGWSBkYXRlIGRhdGV0aW1lOyIpDQp9DQpgYGANCg0KIyMgSW50ZXJhY3Rpbmcgd2l0aCB0aGUgZGF0YQ0KDQpJbWFnaW5lIG5vdyB0aGF0IHlvdSBhcmUgcGVyaGFwcyBhIHNlY29uZGFyeSB1c2VyIG9mIHRoZSBkYXRhIC0gbWF5YmUgdGhpcyBpcyBmcm9tIGEgYmlnIGZpZWxkIGNhbXBhaWduIGFuZCBkaWZmZXJlbnQgcGVvcGxlIHdpbGwgYmUgc2xpY2luZyBhbmQgZGljaW5nIHRoZSBkYXRhIGluIGRpZmZlcmVudCB3YXlzLiBUaGlzIGlzIHdoZXJlIGhhdmluZyB5b3VyIGRhdGEgaW4gYW4gU1FMIGRhdGFiYXNlIGNhbiBiZSBzdXBlciBoZWxwZnVsLiANCg0KWW91IGNhbiBoYXZlIGEgc2VsZWN0IGdyb3VwIG9mIGZvbGtzIG1haW50YWluaW5nIHRoZSBTUUwgZGF0YWJhc2UgKG9yIGV2ZW4gYmV0dGVyIGxvZyBkaXJlY3RseSBpbnRvIGFuIFNRTCBzZXJ2ZXIsIGJ1dCB0aGF0J3MgYSBzdG9yeSBmb3IgYW5vdGhlciBkYXkpLCBhbmQgdGhlbiBjcmVhdGUgYSBuZXcgdXNlciB3aG8gb25seSBoYXMgcGVybWlzc2lvbiB0byBTRUxFQ1QgZGF0YSBmcm9tIHRoZSBTUUwgZGF0YWJhc2UgYnV0IG5vdCBhY3R1YWxseSBtb2RpZnkgaXQuIA0KDQpUaGF0IGtlZXBzIHlvdXIgb3JpZ2luYWwgZGF0YSBzYWZlIGFuZCBzb3VuZCEgQWxzbyBpdCdzIGNvbXB1dGF0aW9uYWxseSBtb3JlIGVmZmljaWVudCB0byBqdXN0IHB1bGwgaW4gdGhlIGRhdGEgeW91IG5lZWQuDQoNClNvIGxldCdzIGxvb2sgYXQgaG93IHdlIGNhbiBkbyB0aGlzIGluIFIuIFRvIGRvIHRoaXMsIHdlJ3JlIGdvaW5nIHRvIHRha2UgYWR2YW50YWdlIG9mIHRoZSAnZGJwbHlyJyBwYWNrYWdlLCB3aGljaCBsZXRzIHlvdSB1c2UgdHlwaWNhbGx5ICd0aWR5dmVyc2UnIHN0eWxlIGNvbW1hbmRzIHRvIGludGVyYWN0IHdpdGggZGF0YWJhc2VzLiBPbmNlIHlvdSd2ZSBmaW5pc2hlZCB5b3VyIHR3ZWFrcywgdGhlIGBkYnBseXInIHBhY2thZ2Ugd2lsbCBqdXN0IG1ha2UgMSBzaW5ndWxhciBjYWxsIHRvIHRoZSBkYXRhYmFzZSwgYW5kIGl0IGFsc28gaGFzIHRoZSBmdW5jdGlvbmFsaXR5IHRvIHNob3cgeW91IHlvdXIgcXVlcnkgc28geW91IGNhbiBsZWFybiB0aGUgU1FMIGVxdWl2YWxlbnQgYXQgdGhlIHNhbWUgdGltZS4gV2luLXdpbiEhDQoNCkkgd2lsbCBzaG93IHlvdSB0aHJlZSBkaWZmZXJlbnQgd2F5cyBvZiBwbGF5aW5nIHdpdGggc29tZSBvZiB0aGlzIGRhdGE6DQoNCjEuIFB1bGxpbmcgYWxsIHRoZSBwb2xsdXRhbnQgZGF0YSBpbnRvIG9uZSBkYXRhLnRhYmxlIGluIFIgZm9yIGEgc3BlY2lmaWVkIHdlZWsgYXQgdGhlIE1haG9uIFBhcmsgc2l0ZSBhbmQgY2FsY3VsYXRpbmcgYSBwc2V1ZG8tQVFJIChteSB0aW1lIGF2ZXJhZ2luZyBpcyB3cm9uZyBmb3IgdHJ1ZSBBUUksIGJ1dCB0aGlzIGlzIGEgZmljdGlvbmFsIGV4YW1wbGUpLiBUaGVyZSBpcyBhIGxpdHRsZSBwYWNrYWdlIGNhbGxlZCBjb24yYXFpIHRoYXQgY29udmVydHMgY29uY2VudHJhdGlvbnMgdG8gQVFJIHRoYXQgd2Ugd2lsbCB1c2UgaGVyZS4NCg0KMi4gQm94IHBsb3RzIGFjcm9zcyBhbGwgb3VyIHNpdGVzIGZvciBlYWNoIHBvbGx1dGFudA0KDQozLiBBIHRpbWUgc2VyaWVzIG9mIGFsbCBvdXIgc2l0ZXMgZm9yIE5PMi4NCg0KVGhlc2UgYXJlIGp1c3Qgc29tZSBzaW1wbGUgZXhhbXBsZXMsIG9idmlvdXNseSBldmVyeW9uZSdzIGRhdGEgcXVlc3Rpb25zIGFyZSB1bmlxdWUsIHRoaXMgaXMganVzdCB0byBwcm92aWRlIHNvbWUgaW5zcGlyYXRpb24uDQoNCmBgYHtyIGV4MS1xdWVyeSwgaW5jbHVkZT1UUlVFLCB3YXJuaW5nPUZBTFNFfQ0KDQojIERhdGEgcHJvY2Vzc2luZyAxOiBMZXQncyBzYXkgd2UgYXJlIGludGVyZXN0ZWQgaW4gY2FsY3VsYXRpbmcgdGhlIEFRSSBmb3IgdGhlIHdlZWsgb2YgTWF5IDE1IC0gMjEsIDIwMjIgYXQgdGhlIE1haG9uIFBhcmsgc2l0ZSAoTVApDQoNCm5vMl9kYiA9IHRibChzcWxfY29ubiwibm8yX2RhaWx5IikgJT4lIHNlbGVjdChkYXRlLE1QKSAlPiUgZmlsdGVyKGJldHdlZW4oZGF0ZSwgYXMuRGF0ZSgnMjAyMi0wNS0xNScpLCBhcy5EYXRlKCcyMDIyLTA1LTIxJykpKSAlPiUgc2hvd19xdWVyeSgpICU+JSBjb2xsZWN0KCkgJT4lIHJlbmFtZShOTzJfTVAgPSBNUCkNCg0KbzNfZGIgPSB0Ymwoc3FsX2Nvbm4sIm8zX2RhaWx5IikgJT4lIHNlbGVjdChkYXRlLE1QKSAlPiUgZmlsdGVyKGJldHdlZW4oZGF0ZSwgYXMuRGF0ZSgnMjAyMi0wNS0xNScpLCBhcy5EYXRlKCcyMDIyLTA1LTIxJykpKSAlPiUgc2hvd19xdWVyeSgpICU+JSBjb2xsZWN0KCkgJT4lIHJlbmFtZShPM19NUCA9IE1QKQ0KDQpwbV9kYiA9IHRibChzcWxfY29ubiwicG1fZGFpbHkiKSAlPiUgc2VsZWN0KGRhdGUsTVApICU+JSBmaWx0ZXIoYmV0d2VlbihkYXRlLCBhcy5EYXRlKCcyMDIyLTA1LTE1JyksIGFzLkRhdGUoJzIwMjItMDUtMjEnKSkpICU+JSBzaG93X3F1ZXJ5KCkgJT4lIGNvbGxlY3QoKSAlPiUgcmVuYW1lKFBNX01QID0gTVApDQoNCiNsZXQncyBwdXQgaXQgdG9nZXRoZXIgaW50byBvbmUgZGF0YWZyYW1lIGZvciBvdXIgbG9jYWwgYW5hbHlzaXMNCmFxaSA8LSBsZWZ0X2pvaW4obm8yX2RiLCBvM19kYiwgYnk9J2RhdGUnKSAlPiUgbGVmdF9qb2luKC4sIHBtX2RiLCBieT0nZGF0ZScpICU+JSByb3d3aXNlKCkgJT4lDQogIG11dGF0ZShhcWkgPSBtYXgoY29uMmFxaSgicG0yNSIsUE1fTVApLGNvbjJhcWkoIm8zIixPM19NUC8xMDAwLCI4aCIpLGNvbjJhcWkoIm5vMiIsTk8yX01QKSkpDQoNCmtuaXRyOjprYWJsZShhcWkpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIw0KDQojIERhdGEgcHJvY2Vzc2luZyAyOiBNYWtlIGJveCBwbG90cyBvZiB0aGUgTk8yLCBPMyBhbmQgUE0yLjUgZGFpbHkgYXZlcmFnZSBjb25jZW50cmF0aW9ucyBhY3Jvc3MgYWxsIHRoZSBzaXRlcy4NCg0Kbm8yX3RpZHkgPSB0Ymwoc3FsX2Nvbm4sIm5vMl9kYWlseSIpICU+JSBzZWxlY3QoLWRhdGUpICU+JSBjb2xsZWN0KCkgJT4lIHBpdm90X2xvbmdlcihldmVyeXRoaW5nKCksbmFtZXNfdG8gPSAic2l0ZSIsIHZhbHVlc190byA9ICJjb25jZW50cmF0aW9uIikNCg0KIyBDcmVhdGUgYSBjdXN0b20gb3JkZXIgZm9yIHRoZSAnc2l0ZScgdmFyaWFibGUNCnNpdGVfb3JkZXIgPC0gYygiQlMiLCAiQksiLCAiTVAiLCJSUyIsIlIxMDAxIiwiUjEwMDIiLCJSMTAwNCIsIlIxMDA1IiwiUjEwMDgiLCJSMTAwOSIsIlIxMDExIiwiUjEwMTIiLCJSMTAzOSIsIlIxMDQwIiwiUjEwNDEiKQ0KDQojIEdlbmVyYXRlIHRoZSBib3hwbG90IGluIGdncGxvdDINCm5vMl9wbG90IDwtIGdncGxvdChubzJfdGlkeSwgYWVzKHggPSBmYWN0b3Ioc2l0ZSwgbGV2ZWxzID0gc2l0ZV9vcmRlciksIHkgPSBjb25jZW50cmF0aW9uLCBmaWxsPXNpdGUpKSArDQogIGdlb21fYm94cGxvdCgpICsNCiAgbGFicyh0aXRsZSA9ICJOTzIgQ29uY2VudHJhdGlvbnMgYnkgU2l0ZSIsDQogICAgICAgeCA9ICJTaXRlIiwNCiAgICAgICB5ID0gIkNvbmNlbnRyYXRpb24gKHBwYikiKSArDQogIHRoZW1lKGF4aXMudGV4dC54ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gOTAsIGhqdXN0ID0gMSksIGxlZ2VuZC5wb3NpdGlvbj0ibm9uZSIpICsNCiAgc2NhbGVfZmlsbF9kaXNjcmV0ZSgpICsNCiAgY29vcmRfY2FydGVzaWFuKHlsaW0gPSBjKDAsNjApKQ0KDQpubzJfcGxvdA0KDQoNCiMgUmVwZWF0IGZvciBPMw0KbzNfdGlkeSA9IHRibChzcWxfY29ubiwibzNfZGFpbHkiKSAlPiUgc2VsZWN0KC1kYXRlKSAlPiUgY29sbGVjdCgpICU+JSBwaXZvdF9sb25nZXIoZXZlcnl0aGluZygpLG5hbWVzX3RvID0gInNpdGUiLCB2YWx1ZXNfdG8gPSAiY29uY2VudHJhdGlvbiIpDQoNCm8zX3Bsb3QgPC0gZ2dwbG90KG8zX3RpZHksIGFlcyh4ID0gZmFjdG9yKHNpdGUsIGxldmVscyA9IHNpdGVfb3JkZXIpLCB5ID0gY29uY2VudHJhdGlvbiwgZmlsbD1zaXRlKSkgKw0KICBnZW9tX2JveHBsb3QoKSArDQogIGxhYnModGl0bGUgPSAiTzMgQ29uY2VudHJhdGlvbnMgYnkgU2l0ZSIsDQogICAgICAgeCA9ICJTaXRlIiwNCiAgICAgICB5ID0gIkNvbmNlbnRyYXRpb24gKHBwYikiKSArDQogIHRoZW1lKGF4aXMudGV4dC54ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gOTAsIGhqdXN0ID0gMSksIGxlZ2VuZC5wb3NpdGlvbj0ibm9uZSIpICsNCiAgc2NhbGVfZmlsbF9kaXNjcmV0ZSgpICsNCiAgY29vcmRfY2FydGVzaWFuKHlsaW0gPSBjKDAsNjApKQ0KbzNfcGxvdA0KDQojIFJlcGVhdCBmb3IgUE0yLjUNCnBtX3RpZHkgPSB0Ymwoc3FsX2Nvbm4sInBtX2RhaWx5IikgJT4lIHNlbGVjdCgtZGF0ZSkgJT4lIGNvbGxlY3QoKSAlPiUgcGl2b3RfbG9uZ2VyKGV2ZXJ5dGhpbmcoKSxuYW1lc190byA9ICJzaXRlIiwgdmFsdWVzX3RvID0gImNvbmNlbnRyYXRpb24iKQ0KDQpwbV9wbG90IDwtIGdncGxvdChwbV90aWR5LCBhZXMoeCA9IGZhY3RvcihzaXRlLCBsZXZlbHMgPSBzaXRlX29yZGVyKSwgeSA9IGNvbmNlbnRyYXRpb24sIGZpbGw9c2l0ZSkpICsNCiAgZ2VvbV9ib3hwbG90KCkgKw0KICBsYWJzKHRpdGxlID0gIlBNMi41IENvbmNlbnRyYXRpb25zIGJ5IFNpdGUiLA0KICAgICAgIHggPSAiU2l0ZSIsDQogICAgICAgeSA9ICJDb25jZW50cmF0aW9uICh1Zy9tMykiKSArDQogIHRoZW1lKGF4aXMudGV4dC54ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gOTAsIGhqdXN0ID0gMSksIGxlZ2VuZC5wb3NpdGlvbj0ibm9uZSIpICsNCiAgc2NhbGVfZmlsbF9kaXNjcmV0ZSgpICsNCiAgY29vcmRfY2FydGVzaWFuKHlsaW0gPSBjKDAsMjApKQ0KcG1fcGxvdA0KDQojIERhdGUgUHJvY2Vzc2luZyAzOiBOb3cgbGV0J3MgbWFrZSBhIHRpbWUgc2VyaWVzIGZvciB0aGUgbW9udGggb2YgSnVseSAyMDIyIGZvciBOTzIgYXQgYWxsIG9mIG91ciBzaXRlcy4NCg0Kbm8yX2p1bHkgPSB0Ymwoc3FsX2Nvbm4sIm5vMl9kYWlseSIpICU+JSBmaWx0ZXIobW9udGgoZGF0ZSk9PTcpICU+JSBzaG93X3F1ZXJ5KCkgJT4lIGNvbGxlY3QoKSAlPiUgcGl2b3RfbG9uZ2VyKGNvbHM9YygyOjE2KSxuYW1lc190byA9ICJzaXRlIiwgdmFsdWVzX3RvID0gImNvbmNlbnRyYXRpb24iKQ0KDQpubzJfanVseSRHcm91cGluZyA8LSBhcy5mYWN0b3Iobm8yX2p1bHkkc2l0ZSkNCg0KDQpnZ3Bsb3Qobm8yX2p1bHksIGFlcyh4PXltZF9obXMoZGF0ZSksIHk9Y29uY2VudHJhdGlvbiwgY29sb3I9R3JvdXBpbmcpKSArIA0KICBnZW9tX2xpbmUoc2l6ZT0yLCBuYS5ybT1UUlVFKSArIA0KICBsYWJzKHRpdGxlID0gIlRpbWUgU2VyaWVzIG9mIERhdGEgZm9yIEp1bHkiLA0KICAgICAgIHggPSAiRGF0ZSIsDQogICAgICAgeSA9ICJOTzIgQ29uY2VudHJhdGlvbiAocHBiKSIpICsgIA0KICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gcmFpbmJvdygxNSksIGJyZWFrcyA9IHNpdGVfb3JkZXIpICsNCiAgdGhlbWVfbWluaW1hbCgpDQpgYGANCg0KIyBQYXJ0IDM6IERhc2hib2FyZHMgYW5kIHBsb3R0aW5nIGluIEdyYWZhbmENCg0KU29tZSBvZiB0aGUgZmlndXJlcyB3ZSBqdXN0IGdlbmVyYXRlZCBhcmUgZmluZSwgb3IgbWlnaHQgYmUgdXNlZnVsIGZvciBhIHB1YmxpY2F0aW9uLCBidXQgc2F5IHdlIGFyZSByb3V0aW5lbHkgY29sbGVjdGluZyBhbmQgZG93bmxvYWRpbmcgZGF0YSBhbmQgd2Ugd2FudCB0byB0cmFjayBvdXIgZGF0YSBhcyBpdCBpcyBjb21pbmcgaW4gKG1heWJlIHdlIGFyZSByb3V0aW5lbHkgY29sbGVjdGluZyBkYXRhIGFuZCB3YW50IGEgcXVpY2sgLyBkeW5hbWljIHdheSB0byB2aXN1YWxpemUpLiBXZSBjYW4gbGV2ZXJhZ2Ugb3VyIHNhbWUgU1FMIGRhdGFiYXNlcyBpbnRvIHRoZSBvcGVuLXNvdXJjZSBHcmFmYW5hIGRhc2hib2FyZGluZyB0b29sLiBMZXQncyBjaGVjayBpdCBvdXQhDQoNCiFbSGF2aW5nIGZ1biBhdCB0aGUgQUFBQVIgdHV0b3JpYWxdKGNlbGVicmF0ZS5wbmcpDQoNCiMjIENyZWF0ZSBhIHJlYWQtb25seSB1c2VyIGluIE15U1FMIHRvIGludGVyZmFjZSB3aXRoIEdyYWZhbmENCg0KVGhlcmUncyBubyByZWFzb24gR3JhZmFuYSBuZWVkcyB0byBiZSBhYmxlIHRvIHdyaXRlIG5ldyBkYXRhLCBpdCdzIGp1c3QgdmlzdWFsaXppbmcgd2hhdCB3ZSBhbHJlYWR5IGNvbGxlY3RlZCwgc28gbGV0J3MgbWFrZSBhIHJlc3RyaWN0ZWQgdmVyc2lvbi4NCg0KPiBDUkVBVEUgVVNFUiAnZ3JhZmFuYS1kZW1vJ0AnbG9jYWxob3N0JyBJREVOVElGSUVEIEJZICdhYWFydHV0b3JpYWwnOw0KDQo+IFNFTEVDVCBVc2VyIGZyb20gbXlzcWwudXNlcjsNCg0KPiBHUkFOVCBTRUxFQ1QgT04gZGF0YWJhc2VfbmFtZS50YWJsZV9uYW1lIFRPICd1c2VybmFtZSdAJ2xvY2FsaG9zdCc7DQoNCj4gRkxVU0ggUFJJVklMRUdFUzsNCg0KTm93IGxldCdzIGhvcCBvbiBvdmVyIHRvIEdyYWZhbmEgYW5kIHNlZSB3aGF0IHdlIGNhbiBkby4gSW4gZ2VuZXJhbCB0aGlzIHdpbGwgY29uc2lzdCBvZjoNCg0KKiBDb25uZWN0aW5nIHRvIG91ciBNeVNRTCBkYXRhIHNvdXJjZSAoanVzdCBhIG9uZSB0aW1lIHRoaW5nKQ0KKiBDcmVhdGluZyBuZXcgcGFuZWxzIGZvciBvdXIgZGFzaGJvYXJkIGVpdGhlciB1c2luZyBTUUwgUXVlcnkgb3Igd2l0aCB0aGVpciBpbnRlcmFjdGl2ZSBjb2RlIGJ1aWxkZXIuDQoNCiMgUGFydCA0OiBTb21lIG1lc3NpZXIgZGF0YQ0KDQpOb3cgbGV0J3MgaW1hZ2luZSB3ZSBoYXZlIHNvbWUgZGF0YSBhcyBpdCBpcyBvdXRwdXR0ZWQgZGlyZWN0bHkgZnJvbSBhbiBpbnN0cnVtZW50LiBMZXQncyBnbyB3aXRoIGEgV0NQQyBmb3IgZXhhbXBsZS4gSW4gb3VyIGV4YW1wbGUgMiBkYXRhIGZvbGRlciwgd2UgaGF2ZSA1IHNlcGFyYXRlIGNzdiBmaWxlcyBmcm9tIDUgZGlmZmVyZW50IGRheXMsIGFuZCB0aGUgZGF0YSBkb2Vzbid0IHN0YXJ0IGNsZWFubHkuIExldCdzIHByb2Nlc3MgdGhpcyB0byBjb25jYXRlbmF0ZSB0aGUgZmlsZXMgYW5kIGV4dHJhY3QgdGhlIHJlbGV2YW50IHN0dWZmIQ0KDQojIyBMb2FkIHRoZSBkYXRhIGFuZCBjaG9vc2UgY29sdW1uIG5hbWVzIHdlIGxpa2UNCg0KYGBge3IgZXgyLWxvYWR9DQojIEZpcnN0IGdldCB0aGUgbmFtZXMgb2YgYWxsIHRoZSBmaWxlcyBpbiBvdXIgV0NQQyByYXcgZm9sZGVyOg0KZmlsZV9uYW1lcyA8LSBsaXN0LmZpbGVzKHBhdGggPSAiZGF0YS9leGFtcGxlIDIvV0NQQyByYXcvIiwgcGF0dGVybiA9ICIqLmNzdiIsIGZ1bGwubmFtZXMgPSBUUlVFKQ0KDQojIFVzZSBsYXBwbHkgdG8gcmVhZCBhbmQgY29uY2F0ZW5hdGUgdGhlIGRhdGENCmRhdGFfbGlzdCA8LSBsYXBwbHkoZmlsZV9uYW1lcywgZnVuY3Rpb24oZmlsZSkgew0KICByZWFkLmNzdihmaWxlLCBza2lwID0gMTYpDQp9KQ0KDQojIENvbWJpbmUgdGhlIGxpc3Qgb2YgZGF0YSBmcmFtZXMgaW50byBvbmUgZGF0YSBmcmFtZSB1c2luZyBiaW5kX3Jvd3MNCmNvbmNhdGVuYXRlZF9jcGMgPC0gYmluZF9yb3dzKGRhdGFfbGlzdCkNCg0KIyBHaXZlIHRoZSBjb2x1bW5zIG5pY2VyIG5hbWVzDQpuZXdfbmFtZXMgPC0gYygiZGF0ZXRpbWUiLCAiZWxhcHNlZCIsICJjb25jZW50cmF0aW9uIiwgImNvdW50cyIsICJlcnJvcl9jb2RlIikNCm5hbWVzKGNvbmNhdGVuYXRlZF9jcGMpIDwtIG5ld19uYW1lcw0KDQojQ2xlYW4gdXAgYW55IGJsYW5rIHJvd3MgbGluZ2VyaW5nIGFyb3VuZCBmcm9tIHRoZSBjc3Y6DQpjb25jYXRlbmF0ZWRfY3BjIDwtIGNvbmNhdGVuYXRlZF9jcGMgJT4lDQogIGZpbHRlcihkYXRldGltZSAhPSAiIiAmICFpcy5uYShkYXRldGltZSkpDQoNCmtuaXRyOjprYWJsZShoZWFkKGNvbmNhdGVuYXRlZF9jcGMpKQ0KDQpgYGANCiMjIENyZWF0ZSBvdXIgU1FMIFRhYmxlIGFuZCBQdXNoIERhdGENCk5vdyB0aGF0IHdlIGFyZSBnZW5lcmFsbHkgaGFwcHkgd2l0aCB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhLCBsZXQncyBzaGlwIGl0IG91dCB0byBvdXIgU1FMIGRhdGFiYXNlIGFuZCB0aGVuIGdldCBpdCBpbnRvIEdyYWZhbmEuIFJlY2FsbCB0aGlzIHdpbGwgaW52b2x2ZSBhIGZldyBzdGVwczoNCg0KMS4gSWYgaXQgZG9lc24ndCBhbHJlYWR5IGV4aXN0LCBtYWtlIGFuIGVtcHR5IHRhYmxlIGluIHlvdXIgU1FMIGRhdGFiYXNlLg0KMi4gV3JpdGUgdGhlIGRhdGEgdG8gb3VyIG5ldyBlbXB0eSB0YWJsZS4NCjMuIEZvcmNlIG91ciBkYXRldGltZSBjb2x1bW4gdG8gaGF2ZSB0aGUgcmlnaHQgZm9ybWF0IHdpdGggJ3NlbmRRdWVyeScuDQo0LiBNYWtlIG91ciBkYXNoYm9hcmQgaW4gR3JhZmFuYSENCg0KYGBge3IgZXgyLXNoaXB9DQoNCiMjIyMgRklSU1QgVElNRSBSVU5OSU5HDQoNCmluaXRpYWxfcnVuX2V4Mj0wDQoNCmlmKGluaXRpYWxfcnVuX2V4Mj09MSl7DQogICMgUmVtZW1iZXIgeW91IHNob3VsZCBvbmx5IGNyZWF0ZSB0aGUgdGFibGUgb25jZSENCmRiQ3JlYXRlVGFibGUoc3FsX2Nvbm4sbmFtZT0id2NwYyIsIGZpZWxkcz1jb25jYXRlbmF0ZWRfY3BjKQ0KDQojIFdyaXRlIG91ciBkYXRhIHRvIHRoZSBTUUwgZGF0YWJhc2UNCmRiV3JpdGVUYWJsZShzcWxfY29ubiwid2NwYyIsY29uY2F0ZW5hdGVkX2NwYyxhcHBlbmQ9VFJVRSwgcm93Lm5hbWVzPUZBTFNFKQ0KDQojIENsZWFuIHVwIGRhdGV0aW1lDQpkYlNlbmRRdWVyeShzcWxfY29ubiwiQUxURVIgVEFCTEUgd2NwYyBNT0RJRlkgZGF0ZXRpbWUgZGF0ZXRpbWU7IikNCn0NCg0KYGBgDQoNCiMjIERlYWxpbmcgd2l0aCBuZXcgZmlsZXMgc2hvd2luZyB1cCBpbiBvdXIgZGlyZWN0b3J5DQpNYXliZSBub3cgd2Ugd2FudCB0byBydW4gdGhpcyBhZ2FpbiB0byBjaGVjayBmb3IgbmV3IGZpbGVzIGFuZCBhcHBlbmQgdGhlbS4uLiB0aGlzIGlzIGVhc2llciBpZiB3ZSBkZWxldGUgb3JpZ2luYWwgZmlsZXMgb25jZSB0aGV5IGFyZSBsb2FkZWQgaW50byBvdXIgU1FMIGRhdGFiYXNlLCBidXQgbGV0J3Mgc2F5IHdlIHdhbnQgdG8gdHJpcGxlIGVuc3VyZSB3ZSBoYXZlIG91ciBkYXRhIGFuZCB3YW50IHRvIG1haW50YWluIG91ciBmaWxlIHN0cnVjdHVyZS4NCg0KVGhpcyBjb2RlIGJsb2NrIHVzZXMgYSBzdG9yZWQgdGV4dCBmaWxlIGBsb2FkZWRfY3BjX2ZpbGVzLnR4dCcgYXMgYSB0cmFja2VyIG9mIHdoYXQgaGFzIGJlZW4gbG9hZGVkIHRvIG91ciBTUUwgZGF0YWJhc2UuIFdoZW4gYSBuZXcgZmlsZSBuYW1lIGlzIGRldGVjdGVkLCBpdCB3aWxsIGFwcGVuZCB0aGF0IGZpbGUgYW5kIHVwZGF0ZSB0aGUgbG9hZGVkX2NwY19maWxlLnR4dCBkb2N1bWVudC4gV2UgY2FuIHRoZW4gc2VlIHRoYXQgdGhpcyBjaGFuZ2UgaGFzIG9jY3VycmVkIG9uIEdyYWZhbmEuDQoNCmBgYHtyIGV4Mi1uZXcgZmlsZXN9DQoNCiMgU3BlY2lmeSB0aGUgcGF0aCB0byB0aGUgc3ViZGlyZWN0b3J5IGNvbnRhaW5pbmcgdGhlIENTViBmaWxlcw0Kc3ViZGlyZWN0b3J5X3BhdGggPC0gImRhdGEvZXhhbXBsZSAyL1dDUEMgcmF3IiAgIyBVcGRhdGUgd2l0aCB0aGUgYWN0dWFsIHBhdGgNCg0KIyBTcGVjaWZ5IHRoZSBwYXRoIHRvIHRoZSB0ZXh0IGZpbGUgZm9yIHN0b3JpbmcgZmlsZSBpbmZvcm1hdGlvbg0KaW5mb19maWxlIDwtICJsb2FkZWRfY3BjX2ZpbGVzLnR4dCINCg0KIyBGdW5jdGlvbiB0byByZWFkIGZpbGUgaW5mb3JtYXRpb24gZnJvbSB0aGUgdGV4dCBmaWxlDQpyZWFkX2ZpbGVfaW5mbyA8LSBmdW5jdGlvbihmaWxlbmFtZSkgew0KICBpZiAoZmlsZS5leGlzdHMoZmlsZW5hbWUpKSB7DQogICAgcmVhZExpbmVzKGZpbGVuYW1lKQ0KICB9IGVsc2Ugew0KICAgIGNoYXJhY3RlcigwKQ0KICB9DQp9DQoNCiAgIyBSZWFkIHRoZSBsaXN0IG9mIGZpbGVzIGN1cnJlbnRseSBpbiB0aGUgZGlyZWN0b3J5DQogIGN1cnJlbnRfZmlsZXMgPC0gbGlzdC5maWxlcyhwYXRoID0gc3ViZGlyZWN0b3J5X3BhdGgsIHBhdHRlcm4gPSAiKi5jc3YiLCBmdWxsLm5hbWVzID0gVFJVRSkNCiAgDQogICMgUmVhZCB0aGUgbGlzdCBvZiBmaWxlcyBwcmV2aW91c2x5IHN0b3JlZCBpbiB0aGUgdGV4dCBmaWxlDQogIHByZXZpb3VzX2ZpbGVzIDwtIHJlYWRfZmlsZV9pbmZvKGluZm9fZmlsZSkNCiAgDQogICMgRmluZCB0aGUgbmV3IGZpbGVzIHRoYXQgYXJlIG5vdCBpbiB0aGUgbGlzdCBvZiBwcmV2aW91c2x5IHN0b3JlZCBmaWxlcw0KICBuZXdfZmlsZXMgPC0gc2V0ZGlmZihjdXJyZW50X2ZpbGVzLCBwcmV2aW91c19maWxlcykNCiAgDQogICMgUmVhZCBhbmQgYXBwZW5kIHRoZSBkYXRhIGZyb20gbmV3IGZpbGVzDQogIGlmIChsZW5ndGgobmV3X2ZpbGVzKSA+IDApIHsNCiAgICBuZXdfZGF0YV9saXN0IDwtIGxhcHBseShuZXdfZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHsNCiAgICAgIHJlYWQuY3N2KGZpbGUsIHNraXAgPSAxNikNCiAgICB9KQ0KICAgIA0KICAgIG5ld19kYXRhIDwtIGJpbmRfcm93cyhuZXdfZGF0YV9saXN0KQ0KICAgIA0KICAgICMgQ3JlYXRlIGFuIGVtcHR5IGRhdGEgZnJhbWUgdG8gc3RvcmUgdGhlIGNvbmNhdGVuYXRlZCBkYXRhDQogICAgY29uY2F0ZW5hdGVkX2NwYyA8LSBkYXRhLmZyYW1lKCkNCiAgICANCiAgICAjIEFwcGVuZCB0aGUgbmV3IGRhdGEgdG8gdGhlIGNvbmNhdGVuYXRlZF9kYXRhIGRhdGEgZnJhbWUNCiAgICBjb25jYXRlbmF0ZWRfY3BjIDwtIGJpbmRfcm93cyhjb25jYXRlbmF0ZWRfY3BjLCBuZXdfZGF0YSkNCiAgICANCiAgICAjIEdpdmUgdGhlIGNvbHVtbnMgbmljZXIgbmFtZXMNCiAgICBuZXdfbmFtZXMgPC0gYygiZGF0ZXRpbWUiLCAiZWxhcHNlZCIsICJjb25jZW50cmF0aW9uIiwgImNvdW50cyIsICJlcnJvcl9jb2RlIikNCiAgICBuYW1lcyhjb25jYXRlbmF0ZWRfY3BjKSA8LSBuZXdfbmFtZXMNCg0KICAgICNDbGVhbiB1cCBhbnkgYmxhbmsgcm93cyBsaW5nZXJpbmcgYXJvdW5kIGZyb20gdGhlIGNzdjoNCiAgICBjb25jYXRlbmF0ZWRfY3BjIDwtIGNvbmNhdGVuYXRlZF9jcGMgJT4lDQogICAgICBmaWx0ZXIoZGF0ZXRpbWUgIT0gIiIgJiAhaXMubmEoZGF0ZXRpbWUpKQ0KICAgIA0KICAgICMgQXBwZW5kIHRoZSBuZXcgZmlsZSBuYW1lcyB0byB0aGUgdGV4dCBmaWxlDQogICAgbWVyZ2VkX2ZpbGVzIDwtIGMocHJldmlvdXNfZmlsZXMsIG5ld19maWxlcykNCiAgICB3cml0ZUxpbmVzKG1lcmdlZF9maWxlcywgaW5mb19maWxlLCBzZXA9IlxuIikNCiAgICANCiAgICAjIFdyaXRlIG91ciBkYXRhIHRvIHRoZSBTUUwgZGF0YWJhc2UNCiAgICBkYldyaXRlVGFibGUoc3FsX2Nvbm4sIndjcGMiLGNvbmNhdGVuYXRlZF9jcGMsYXBwZW5kPVRSVUUsIHJvdy5uYW1lcz1GQUxTRSkNCg0KICAgICMgQ2xlYW4gdXAgZGF0ZXRpbWUNCiAgICBkYlNlbmRRdWVyeShzcWxfY29ubiwiQUxURVIgVEFCTEUgd2NwYyBNT0RJRlkgZGF0ZXRpbWUgZGF0ZXRpbWU7IikNCiAgICANCiAgICAjIE9wdGlvbmFsbHksIHlvdSBjYW4gcHJpbnQgYSBtZXNzYWdlIGluZGljYXRpbmcgbmV3IGRhdGEgaGFzIGJlZW4gYWRkZWQNCiAgICBjYXQoIk5ldyBkYXRhIGFkZGVkIGZyb206IiwgbmV3X2ZpbGVzLCAiXG4iKQ0KICB9DQpgYGANCg0KVGhhdCdzIGl0ISBUaGFua3MgZm9yIGZvbGxvd2luZyBhbG9uZyBpbiB0b2RheSdzIHR1dG9yaWFsISBJZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zLCBmZWVsIGZyZWUgdG8gcmVhY2ggb3V0IHZpYSBlbWFpbCBhdCBbbnppbW1lcm1hbkBtZWNoLnViYy5jYV0obWFpbHRvOm56aW1tZXJtYW5AbWVjaC51YmMuY2EpDQoNClAuUy4gY3VyaW91cyBob3cgSSBtYWRlIHRoaXMgd2Vic2l0ZT8gU3VwZXIgc2ltcGxlLiBZb3UganVzdCBuZWVkIHRvIG5hbWUgeW91ciBvdXRwdXQgaHRtbCBmaWxlICJpbmRleC5odG1sIiBhbmQgaGF2ZSBhIFlBTUwgZmlsZSBjYWxsZWQgIl9zaXRlLnltbCIgdGhhdCBkZXNjcmliZXMgeW91ciBuYXZpZ2F0aW9uIGJhci4gVGhlbiBvbiBHaXRIdWIsIGdvIHRvIFNldHRpbmdzIC0tPiBQYWdlcyBhbmQgeW91IGNhbiByZW5kZXIgeW91ciBtYXJrZG93biBhcyBhIEdpdEh1Yi5pbyBwYWdlLiBUYS1kYSENCg0KDQo=</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("index.Rmd");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
